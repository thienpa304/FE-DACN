"use strict";(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[709],{67902:(e,n,i)=>{i.d(n,{A:()=>o});var t=i(34535),l=i(69869);const o=(0,t.Ay)(l.A)((()=>"\n    .MuiTabs-scrollableX {\n    overflow-x: auto !important;\n      }\n  "))},31668:(e,n,i)=>{i.d(n,{A:()=>r,V:()=>d});var t=i(82907),l=i(53679),o=i(36110),a=i(65043),s=i(89138);function r(e){if(!e)return{};const{isEmployer:n}=(0,o.n)(),{setItemDetail:i,itemDetail:r}=(0,s.A)(),{data:d,isLoading:c,isFetching:u}=(0,t.useQuery)(["job-getByIdByEmmployer",e],(async()=>l.L8.getById(e)),{retry:1,refetchOnWindowFocus:!1,enabled:n});return(0,a.useEffect)((()=>{if(null!==d&&void 0!==d&&d.data){var e,n;const t={...null===d||void 0===d?void 0:d.data,sex:null===(null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.sex)?"T\u1ea5t c\u1ea3":null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.sex};i(t)}}),[JSON.stringify(d)]),{data:r,isLoading:c,isFetching:u}}function d(e){const{isEmployer:n}=(0,o.n)(),[i,s]=(0,a.useState)([]),{data:r,isLoading:d}=(0,t.useQuery)(["jobs-getByIdListByOwner",JSON.stringify(e)],(async()=>{if(!e.length)return[];Promise.allSettled(e.map((e=>l.L8.getById(e)))).then((e=>{const n=e.filter((e=>"fulfilled"===e.status)).map((e=>e.value));s(n)})).catch((e=>console.error(e)))}),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0,enabled:n});return{jobs:(null===i||void 0===i?void 0:i.map((e=>{var n,i,t;return{...null===e||void 0===e?void 0:e.data,id:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.postId,sex:null===(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.sex)?"T\u1ea5t c\u1ea3":null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.sex}})))||[],isLoading:d}}},69416:(e,n,i)=>{i.d(n,{c:()=>U,A:()=>ie});var t=i(19464),l=i(28800),o=i(83462),a=i(26600),s=i(17392),r=i(39336),d=i(35316),c=i(19252),u=i(28883),h=i(68903),g=i(77739),m=i(85865),p=i(11906),v=i(81637),x=i(59162),f=i(82907),y=i(36110),A=i(52404);const S=()=>{const e=(0,f.useQueryClient)(),{toast:n}=(0,y.n)(),{isLoading:i,mutateAsync:t}=(0,f.useMutation)((e=>{let[n,i]=e;return A.zP.update(n,i)}),{onSuccess:i=>{200===i.status?(e.invalidateQueries(["application-getList"]),n.success({massage:i.message})):n.error({massage:i.message})},onError:e=>{n.error({massage:e.response.data.message})}});return{onSaveApplicationStatus:t,isLoading:i}};var j=i(65043),b=i(49768),C=i(42445),P=i(62237),F=i(25567),w=i(84391),L=i(74802),W=i(19193),z=i(60427),D=i(51597),I=i(70579);const T=function(e){let{profile:n}=e;const i=document.createElement("div"),t=(0,w.H)(i);document.body.appendChild(i),t.render((0,I.jsx)(z.A,{children:(0,I.jsxs)(o.A,{open:!0,fullWidth:!0,maxWidth:"md",fullScreen:D.Fr,children:[(0,I.jsxs)(a.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["H\u1ed3 s\u01a1 ng\u01b0\u1eddi d\xf9ng",(0,I.jsx)(s.A,{"aria-label":"close",onClick:()=>{t.unmount()},sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,I.jsx)(L.A,{})})]}),(0,I.jsx)(r.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,I.jsx)(d.A,{children:(0,I.jsx)(W.A,{user:n,bgcolor:"none",showTitle:!1})})]})}))};var k=i(95382),_=i(71525),E=i(56743),M=i(65499),N=i(77326),B=i(65072),O=i(21430),Q=i(50135),J=i(67597),R=i(31668),V=i(53679),Y=i(89138);function H(e){if(!e)return{};const{isAdmin:n}=(0,y.n)(),{setItemDetail:i,itemDetail:t}=(0,Y.A)(),{data:l,isLoading:o,isFetching:a}=(0,f.useQuery)(["job-getByIdByAdmin",e],(async()=>V.G1.getById(e)),{retry:1,refetchOnWindowFocus:!1,enabled:n});return(0,j.useEffect)((()=>{if(null!==l&&void 0!==l&&l.data){var e,n;const t={...null===l||void 0===l?void 0:l.data,sex:null===(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.sex)?"T\u1ea5t c\u1ea3":null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.sex};i(t)}}),[JSON.stringify(l)]),{data:t,isLoading:o,isFetching:a}}var q=i(65498),G=i(60446),X=i.n(G),K=i(7968);const U=e=>{const{postId:n,setSelectedId:i,isAdmin:t}=e;if(!n)return;const l=t?H:R.A,{isMobile:u}=(0,K.Q)(),{data:h,isLoading:g}=l(n);return g?(0,I.jsx)(P.A,{}):(0,I.jsxs)(o.A,{open:Boolean(n),onClose:()=>{i(null)},fullWidth:!0,maxWidth:"lg",fullScreen:u,children:[(0,I.jsxs)(a.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["Vi\u1ec7c l\xe0m \u1ee9ng tuy\u1ec3n",(0,I.jsx)(s.A,{"aria-label":"close",onClick:()=>i(null),sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,I.jsx)(L.A,{})})]}),(0,I.jsx)(r.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,I.jsx)(d.A,{children:(0,I.jsxs)(c.A,{sx:{paddingY:2},children:[(0,I.jsx)(N.A,{data:h}),(0,I.jsx)(B.A,{}),(0,I.jsx)(O.A,{sx:{mt:2},company:null===h||void 0===h?void 0:h.employer})]})})]})},Z=e=>{const{employee_Profile:{application:n},employer_Requirement:i}=null===e||void 0===e?void 0:e.row,[t,l]=(0,j.useState)(null);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(M.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{l(null===i||void 0===i?void 0:i.postId)},children:n.jobTitle}),(0,I.jsx)(U,{postId:t,setSelectedId:l})]})},$=e=>{const{employee_Profile:n}=null===e||void 0===e?void 0:e.row,{application:i}=n;return(0,I.jsxs)(h.Ay,{container:!0,alignItems:"center",children:[(0,I.jsx)(h.Ay,{item:!0,xs:10.5,sm:12,children:(0,I.jsx)(M.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{T({profile:n})},children:i.name})}),(0,I.jsx)(h.Ay,{item:!0,xs:1.5,sm:0,sx:{display:{sm:"none",xs:"inline"}},children:(0,I.jsx)(g.A,{title:"Chi ti\u1ebft",children:(0,I.jsx)(s.A,{size:"small",onClick:()=>{const e=(0,C.SE)(i.matchingScore),n={"T\xean h\u1ed3 s\u01a1":i.name,"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n":i.jobTitle,"Lo\u1ea1i h\u1ed3 s\u01a1":i.applicationType,"Tr\u1ea1ng th\xe1i":i.status,"\u0110\u1ed9 ph\xf9 h\u1ee3p":(0,I.jsx)(u.A,{value:e,max:3,size:"small",readOnly:!0,sx:{position:"relative",bottom:-5}})};(0,Q.A)(n)},children:(0,I.jsx)(J.A,{fontSize:"small"})})})})]})},ee=e=>{var n;const{employee_Profile:{application:i}}=null===e||void 0===e?void 0:e.row,{onSaveApplicationStatus:t}=S(),[l,o]=(0,j.useState)(null),{isMobile:a}=(0,K.Q)();(0,j.useEffect)((()=>{var e;if(!i.status||!x.J2)return;const n=null===(e=x.J2.find((e=>e.label===i.status)))||void 0===e?void 0:e.value;o(n)}),[i.status]);return(0,I.jsx)(b.A,{value:l,options:x.J2,onChange:e=>{t([i.id,{status:e.target.value}]).then((()=>{o(e.target.value)}))},sx:{color:null===(n=x.J2.find((e=>e.value===l)))||void 0===n?void 0:n.optionColor,fontSize:a&&"10px"}})},ne=e=>{const{employee_Profile:{application:n}}=null===e||void 0===e?void 0:e.row,i=(0,C.SE)(n.matchingScore);return void 0===n.matchingScore||null===n.matchingScore?(0,I.jsx)(m.A,{sx:{color:"text.disabled",fontStyle:"italic"},children:"Ch\u01b0a ph\xe2n t\xedch"}):(0,I.jsx)(u.A,{value:i,max:3,readOnly:!0})};function ie(e){var n;const{pageSize:i,data:o,currentPage:a,totalPages:s,handlePageChange:r,loading:d,setSortModel:c}=e,[u,g]=(0,j.useState)([]),[f,y]=(0,j.useState)(!1),[A,P]=(0,j.useState)([]),[w,L]=(0,j.useState)(!1),[W,z]=(0,j.useState)(!1),[D,T]=(0,j.useState)(!1),[M,N]=(0,j.useState)([]),[B,O]=(0,j.useState)(!1),[Q,J]=(0,j.useState)({signal:!1,resultData:null}),[R,V]=(0,j.useState)([]),[Y,H]=(0,j.useState)(null),{isMobile:G}=(0,K.Q)(),U=[{field:"name",headerName:"T\xean h\u1ed3 s\u01a1",minWidth:G?110:180,renderCell:$,sortable:!0},{field:"jobTitle",headerName:"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n",minWidth:300,renderCell:Z,sortable:!0},{field:"createAt",headerName:"Ng\xe0y n\u1ed9p",minWidth:150,headerAlign:"center",align:"center",sortable:!0,renderCell:e=>X()(null===e||void 0===e?void 0:e.value).format("DD/MM/YYYY")},{field:"applicationType",headerName:"Lo\u1ea1i h\u1ed3 s\u01a1",minWidth:150,headerAlign:"center",align:"center",renderCell:e=>{var n,i,t;return null===e||void 0===e||null===(n=e.row)||void 0===n||null===(i=n.employee_Profile)||void 0===i||null===(t=i.application)||void 0===t?void 0:t.applicationType}},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",minWidth:G?120:180,renderCell:ee,headerAlign:"center",align:"center"},{field:"matchingScore",headerName:"\u0110\u1ed9 ph\xf9 h\u1ee3p",minWidth:140,align:"center",headerAlign:"center",renderCell:ne,sortable:!0}],{onSaveApplicationStatus:ie}=S(),te=()=>{O(!1),L(!1),z(!1),T(!1),y(!1),N([]),J({signal:!1,resultData:null}),console.log("Finished All")},le=async e=>{g(e)},oe=e=>{y(e)},ae=(e,n)=>{J({signal:e,resultData:n})},se=async e=>{const n=await(0,C.d8)(e),i=re(n);de(i)},re=e=>u.map((n=>{var i;const t=(0,C.AQ)(n,e,w);return console.log("matchingScore",t),{...n,employee_Profile:{...null===n||void 0===n?void 0:n.employee_Profile,application:{...null===n||void 0===n||null===(i=n.employee_Profile)||void 0===i?void 0:i.application,matchingScore:t}}}})),de=e=>{if(!w){const n=e.filter((e=>{var n;return(null===e||void 0===e||null===(n=e.employee_Profile.application)||void 0===n?void 0:n.matchingScore)>=C.ay}));N(n)}g(e),P((n=>n.map((n=>e.find((e=>(null===e||void 0===e?void 0:e.id)===(null===n||void 0===n?void 0:n.id)))||n)))),B&&(w?W?D||T(!0):z(!0):L(!0))},ce=e=>{const n=u.filter((e=>R.includes(e.id))).map(ue);g(n),(0,C.NQ)({round:e,handleAnalyzeResult:se,setIsAnalyzing:oe,resetMatchingScoreList:n,setAnalyzedProfile:le,handleGoToAnalyzeResult:ae,passRoundProfiles:1!==e?M:void 0})},ue=e=>({...e,employee_Profile:{...e.employee_Profile,application:{...e.employee_Profile.application,matchingScore:null}}}),he=()=>{Promise.all(A.filter((e=>R.includes(e.id))).map((e=>{var n,i;return ie([e.id,{matchingScore:null===e||void 0===e||null===(n=e.employee_Profile)||void 0===n||null===(i=n.application)||void 0===i?void 0:i.matchingScore}])}))).then(te)},ge=()=>{Promise.all(R.map((e=>ie([e,{status:Y}]))))};return(0,j.useEffect)((()=>{Q.signal&&se(Q.resultData)}),[Q.signal]),(0,j.useEffect)((()=>{P(o),g(o)}),[o]),(0,j.useEffect)((()=>{B&&(w?!W&&M.length>0?ce(2):D?he():ce(3):ce(1))}),[B,w,W,D]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(t.A,{sx:{display:"block",float:{md:"right"},minWidth:{md:500},maxWidth:500},children:(0,I.jsxs)(h.Ay,{container:!0,sx:{alignItems:"center"},spacing:1,children:[(0,I.jsx)(h.Ay,{item:!0,md:3,xs:12,children:(0,I.jsxs)(m.A,{fontWeight:700,textAlign:"center",sx:{mt:{xs:2,md:0}},children:["\u0110\xe3 ch\u1ecdn: ",R.length]})}),(0,I.jsxs)(h.Ay,{item:!0,md:5,xs:12,display:"flex",children:[(0,I.jsx)(b.A,{options:x.J2,onChange:e=>{H(e.target.value)},value:R.length>0?Y:"",sx:{color:null===(n=x.J2.find((e=>e.value===Y)))||void 0===n?void 0:n.optionColor},disabled:!R.length,label:"Duy\u1ec7t nhanh"}),(0,I.jsx)(p.A,{variant:"contained",size:"small",color:"info",sx:{py:1,px:0},onClick:()=>{(0,_.A)({handleConfirm:ge,message:"Chuy\u1ec3n c\xe1c h\u1ed3 s\u01a1 \u0111\xe3 ch\u1ecdn sang tr\u1ea1ng th\xe1i ".concat(E.q0[Y],"?")})},disabled:!R.length||!Y,children:(0,I.jsx)(k.A,{sx:{fontSize:15}})})]}),(0,I.jsx)(h.Ay,{item:!0,container:!0,md:4,xs:12,sx:{display:"flex",alignItems:"center"},children:(0,I.jsxs)(p.A,{onClick:()=>O(R.length>0),variant:"contained",size:"small",disabled:B||!R.length,fullWidth:!0,sx:{py:1,px:0},children:[(0,I.jsx)(h.Ay,{item:!0,xs:f?9:12,children:R.length&&B?"\u0110ang ph\xe2n t\xedch":"Ph\xe2n t\xedch h\u1ed3 s\u01a1"}),(0,I.jsx)(h.Ay,{item:!0,xs:f?3:0,children:f&&(0,I.jsx)(v.A,{size:18,color:"secondary"})})]})})]})}),(0,I.jsx)(l.A,{rows:A,columns:U,initialState:{pagination:{paginationModel:{pageSize:i}},columns:{columnVisibilityModel:{jobTitle:!G,applicationType:!G,matchingScore:!G}}},hideFooter:!0,sx:{minHeight:"74vh",width:"100%"},checkboxSelection:!0,disableRowSelectionOnClick:G,rowSelection:!0,onRowSelectionModelChange:e=>{V(e)},loading:d,onSortModelChange:e=>(0,q.V)(e,c)}),(0,I.jsx)(F.A,{currentPage:a,totalPages:s,handlePageChange:r,disabled:B||d})]})}},95382:(e,n,i)=>{var t=i(32392);n.A=void 0;var l=t(i(40039)),o=i(70579),a=(0,l.default)((0,o.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");n.A=a}}]);
//# sourceMappingURL=709.f55923f0.chunk.js.map