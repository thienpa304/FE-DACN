"use strict";(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[751],{67902:(e,i,l)=>{l.d(i,{A:()=>t});var n=l(34535),o=l(69869);const t=(0,n.Ay)(o.A)((()=>"\n    .MuiTabs-scrollableX {\n    overflow-x: auto !important;\n      }\n  "))},94220:(e,i,l)=>{l.d(i,{A:()=>s,L:()=>r});var n=l(82907),o=l(52404),t=l(65043),a=l(36110);function s(e){const{isEmployer:i}=(0,a.n)();if(!e)return{};const{data:l,isLoading:t}=(0,n.useQuery)(["application-getById",e],(async()=>o.DG.getById(e)),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0,enabled:i});return{data:null===l||void 0===l?void 0:l.data,isLoading:t}}function r(e){const[i,l]=(0,t.useState)([]),{data:a,isLoading:s,refetch:r}=(0,n.useQuery)(["application-getByIdList",JSON.stringify(e)],(async()=>{if(!e.length)return[];Promise.allSettled(e.map((e=>o.DG.getById(e)))).then((e=>{const i=e.filter((e=>"fulfilled"===e.status)).map((e=>e.value));l(i)})).catch((e=>console.log(e)))}),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:null===i||void 0===i?void 0:i.map((e=>null===e||void 0===e?void 0:e.data)),isLoading:s,refetch:r}}},31751:(e,i,l)=>{l.r(i),l.d(i,{default:()=>te});var n=l(19252),o=l(68903),t=l(12110),a=l(79958),s=l(39336),r=l(26494),d=l(24056),c=l(82907),u=l(52404),v=l(36110);const h=e=>{var i;const{isEmployer:l}=(0,v.n)(),{data:n,isLoading:o,refetch:t,isFetching:a}=(0,c.useQuery)(["application-getList",null===e||void 0===e?void 0:e.page,null===e||void 0===e?void 0:e.status,null===e||void 0===e?void 0:e.matchingScore],(()=>u.DG.get({params:e})),{keepPreviousData:!0,retry:1,refetchOnWindowFocus:!1,enabled:l});return{data:(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.map((e=>({...e,id:e.application_id}))))||[],isLoading:o,refetch:t,isFetching:a}};var p=l(19464),g=l(28800),m=l(83462),f=l(26600),x=l(17392),y=l(35316),A=l(77739),j=l(85865),S=l(11906),b=l(81637),P=l(59162);const C=()=>{const e=(0,c.useQueryClient)(),{toast:i}=(0,v.n)(),{isLoading:l,mutateAsync:n}=(0,c.useMutation)((e=>{let[i,l]=e;return u.zP.update(i,l)}),{onSuccess:l=>{200===l.status?(e.invalidateQueries(["application-getList"]),i.success({massage:l.message})):i.error({massage:l.message})},onError:e=>{i.error({massage:e.response.data.message})}});return{onSaveApplicationStatus:n,isLoading:l}};var w=l(65043),L=l(49768),_=l(94220),F=l(42445),I=l(62237),T=l(21886),k=l(3553),D=l(84391),z=l(74802),W=l(19193),N=l(60427),J=l(14015),O=l(70579);const R=function(e){let{profile:i}=e;const l=document.createElement("div"),n=(0,D.H)(l);document.body.appendChild(l),n.render((0,O.jsx)(N.A,{children:(0,O.jsxs)(m.A,{open:!0,fullWidth:!0,maxWidth:"md",fullScreen:J.Fr,children:[(0,O.jsxs)(f.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["H\u1ed3 s\u01a1 ng\u01b0\u1eddi d\xf9ng",(0,O.jsx)(x.A,{"aria-label":"close",onClick:()=>{n.unmount()},sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,O.jsx)(z.A,{})})]}),(0,O.jsx)(s.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,O.jsx)(y.A,{children:(0,O.jsx)(W.A,{user:i,bgcolor:"none",showTitle:!1})})]})}))};var E=l(95382),B=l(94006),M=l(56743),Q=l(65499),$=l(688),G=l(5660),H=l(21430),V=l(9971),q=l(69781);const K=()=>{const{data:e}=(0,V.G)(q.tm),i=(0,V.j)();return{applicationList:e,setApplicationList:e=>{i((0,q.JD)(e))},resetApplicationList:()=>{i((0,q.ib)())}}};var X=l(89138),Y=l(50135),U=l(67597);const Z=e=>{var i;let{applicationId:l,setSelectedId:o}=e;if(!Boolean(l))return;const{applicationList:t}=K(),{setItemDetail:a,itemDetail:r}=(0,X.A)(),d=null===t||void 0===t||null===(i=t.find((e=>e.application_id===l)))||void 0===i?void 0:i.jobPosting.postId,{data:c,isLoading:u}=(0,T.A)(d);return console.log(c,l,d),(0,w.useEffect)((()=>{a(c)}),[c]),u||!c?(0,O.jsx)(I.A,{}):(0,O.jsxs)(m.A,{open:Boolean(l),onClose:()=>{o(null)},fullWidth:!0,maxWidth:"lg",fullScreen:J.Fr,children:[(0,O.jsxs)(f.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n",(0,O.jsx)(x.A,{"aria-label":"close",onClick:()=>o(null),sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,O.jsx)(z.A,{})})]}),(0,O.jsx)(s.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,O.jsx)(y.A,{children:(0,O.jsxs)(n.A,{sx:{paddingY:2},children:[(0,O.jsx)($.A,{data:c}),(0,O.jsx)(G.A,{}),(0,O.jsx)(H.A,{sx:{mt:2},company:null===c||void 0===c?void 0:c.employer})]})})]})},ee=[{field:"name",headerName:"T\xean h\u1ed3 s\u01a1",minWidth:J.Fr?110:220,renderCell:e=>{var i;const{data:l}=(0,_.A)(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.id);return(0,O.jsxs)(o.Ay,{container:!0,alignItems:"center",children:[(0,O.jsx)(o.Ay,{item:!0,xs:10.5,sm:12,children:(0,O.jsx)(Q.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{R({profile:l})},children:e.value})}),(0,O.jsx)(o.Ay,{item:!0,xs:1.5,sm:0,sx:{display:{sm:"none",xs:"inline"}},children:(0,O.jsx)(A.A,{title:"Chi ti\u1ebft",children:(0,O.jsx)(x.A,{size:"small",onClick:()=>{var i,l,n,o,t,a,s,r,d,c;let u="";(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.matchingScore)>=F.IF?u="Cao":(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.matchingScore)>=F.$I&&(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.matchingScore)<F.IF?u="Trung b\xecnh":(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.matchingScore)>=F.ay&&(null===e||void 0===e||null===(t=e.row)||void 0===t?void 0:t.matchingScore)<F.$I?u="Th\u1ea5p":(null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.matchingScore)<0&&(u="Kh\xf4ng ph\xf9 h\u1ee3p");const v={"T\xean h\u1ed3 s\u01a1":null===e||void 0===e||null===(s=e.row)||void 0===s?void 0:s.name,"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n":null===e||void 0===e||null===(r=e.row)||void 0===r?void 0:r.jobTitle,"Lo\u1ea1i h\u1ed3 s\u01a1":null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.applicationType,"Tr\u1ea1ng th\xe1i":null===e||void 0===e||null===(c=e.row)||void 0===c?void 0:c.status,"\u0110\u1ed9 ph\xf9 h\u1ee3p":u};(0,Y.A)(v)},children:(0,O.jsx)(U.A,{fontSize:"small"})})})})]})},sortable:!0},{field:"jobTitle",headerName:"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n",minWidth:400,renderCell:e=>{const[i,l]=(0,w.useState)(null);if(e.value)return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Q.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{var i;l(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.id)},children:e.value}),(0,O.jsx)(Z,{applicationId:i,setSelectedId:l})]})},sortable:!0},{field:"applicationType",headerName:"Lo\u1ea1i h\u1ed3 s\u01a1",minWidth:150,headerAlign:"center",align:"center"},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",minWidth:J.Fr?120:180,renderCell:e=>{var i;const{onSaveApplicationStatus:l}=C(),[n,o]=(0,w.useState)(null);(0,w.useEffect)((()=>{var i;if(!e.value||!P.J2)return;const l=null===(i=P.J2.find((i=>i.label===e.value)))||void 0===i?void 0:i.value;o(l)}),[e.value]);return(0,O.jsx)(L.A,{value:n,options:P.J2,onChange:i=>{l([e.id,{status:i.target.value}]).then((()=>{o(i.target.value)}))},sx:{color:null===(i=P.J2.find((e=>e.value===n)))||void 0===i?void 0:i.optionColor,fontSize:J.Fr&&"10px"}})},sortable:!0,headerAlign:"center",align:"center"},{field:"matchingScore",headerName:"\u0110\u1ed9 ph\xf9 h\u1ee3p",minWidth:150,align:"center",headerAlign:"center",renderCell:e=>{let i="";return e.value>=F.IF?i="Cao":e.value>=F.$I&&e.value<F.IF?i="Trung b\xecnh":e.value>=F.ay&&e.value<F.$I?i="Th\u1ea5p":e.value<0&&(i="Kh\xf4ng ph\xf9 h\u1ee3p"),void 0===e.value||null===e.value?(0,O.jsx)(j.A,{sx:{color:"text.disabled",fontStyle:"italic"},children:"Ch\u01b0a x\xe1c \u0111\u1ecbnh"}):(0,O.jsx)(p.A,{sx:{width:"90%",borderRadius:2,p:1,bgcolor:e.value>=F.IF?"#ffc107":e.value>=F.$I?"#A1C398":e.value>=F.ay?"#b5b5b5":"#efefef",display:"flex",justifyContent:"center",alignItems:"center"},children:i})},sortable:!0}];function ie(e){var i;const{pageSize:l,data:n,currentPage:t,totalPages:a,handlePageChange:s}=e,[r,d]=(0,w.useState)([]),[c,u]=(0,w.useState)(!1),[v,h]=(0,w.useState)([]),[m,f]=(0,w.useState)(!1),[x,y]=(0,w.useState)(!1),[A,I]=(0,w.useState)(!1),[D,z]=(0,w.useState)([]),[W,N]=(0,w.useState)(!1),[R,Q]=(0,w.useState)({signal:!1,resultData:null}),[$,G]=(0,w.useState)([]),[H,V]=(0,w.useState)(!0),q=null===n||void 0===n?void 0:n.map((e=>null===e||void 0===e?void 0:e.application_id)),K=[...new Set(null===n||void 0===n?void 0:n.map((e=>{var i;return null===e||void 0===e||null===(i=e.jobPosting)||void 0===i?void 0:i.postId})))],{jobs:X,isLoading:Y}=(0,T.B)(K),{data:U,isLoading:Z,refetch:ie}=(0,_.L)(q),{onSaveApplicationStatus:le}=C(),ne=async e=>{d(e)},oe=e=>{u(e)},te=(e,i)=>{Q({signal:e,resultData:i})},ae=async e=>{const i=await(0,F.d8)(e),l=se(i);de(l)},se=e=>r.map((i=>{var l;const n=re(i,e);return console.log("matchingScore",n),{...i,employee_Profile:{...null===i||void 0===i?void 0:i.employee_Profile,application:{...null===i||void 0===i||null===(l=i.employee_Profile)||void 0===l?void 0:l.application,matchingScore:n}}}})),re=(e,i)=>{var l,n;const o=i.find((i=>(null===i||void 0===i?void 0:i.id)===(null===e||void 0===e?void 0:e.id)));var t,a,s,r,d,c;return void 0!==(null===o||void 0===o?void 0:o.result)?void 0!==(null===e||void 0===e||null===(t=e.employee_Profile)||void 0===t||null===(a=t.application)||void 0===a?void 0:a.matchingScore)?(null===e||void 0===e||null===(s=e.employee_Profile)||void 0===s||null===(r=s.application)||void 0===r?void 0:r.matchingScore)+o.result:o.result:!m&&(null!==e&&void 0!==e&&null!==(l=e.employee_Profile)&&void 0!==l&&l.online_profile||null!==e&&void 0!==e&&null!==(n=e.employee_Profile)&&void 0!==n&&n.attached_document)?(0,F._h)(null===e||void 0===e?void 0:e.employer_Requirement,null===e||void 0===e?void 0:e.employee_Profile):null===e||void 0===e||null===(d=e.employee_Profile)||void 0===d||null===(c=d.application)||void 0===c?void 0:c.matchingScore},de=e=>{if(!m){const i=e.filter((e=>{var i;return(null===e||void 0===e||null===(i=e.employee_Profile.application)||void 0===i?void 0:i.matchingScore)>=F.ay}));z(i)}d(e);const i=e.map((e=>{var i;return{...null===e||void 0===e||null===(i=e.employee_Profile)||void 0===i?void 0:i.application,id:e.id}}));h((e=>e.map((e=>i.find((i=>(null===i||void 0===i?void 0:i.id)===(null===e||void 0===e?void 0:e.id)))||e)))),W&&(m?x?A||I(!0):y(!0):f(!0))},ce=()=>null===n||void 0===n?void 0:n.map((e=>{var i,l,n;const o=null===X||void 0===X?void 0:X.find((i=>{var l;return(null===i||void 0===i?void 0:i.postId)===(null===e||void 0===e||null===(l=e.jobPosting)||void 0===l?void 0:l.postId)})),t=null===U||void 0===U?void 0:U.find((i=>{var l;return(null===i||void 0===i||null===(l=i.application)||void 0===l?void 0:l.application_id)===(null===e||void 0===e?void 0:e.application_id)}));if(!o||!t)return null;const a=(0,F.MO)(o),s=(0,F.kF)(t);return{id:null===e||void 0===e?void 0:e.application_id,employer_Requirement:a,employee_Profile:{...s,application:{...s.application,jobTitle:null===o||void 0===o?void 0:o.jobTitle,keywords:null!==s&&void 0!==s&&null!==(i=s.application)&&void 0!==i&&i.keywords?null===s||void 0===s||null===(l=s.application)||void 0===l?void 0:l.keywords:null!==s&&void 0!==s&&s.online_profile?null===t||void 0===t?void 0:t.online_profile.keywords:null===s||void 0===s||null===(n=s.attached_document)||void 0===n?void 0:n.keywords}}}})).filter(Boolean),ue=()=>{if(m)!x&&D.length>0?(0,F.NQ)({round:2,handleAnalyzeResult:ae,setIsAnalyzing:oe,passRoundProfiles:D}):A?(Promise.all(v.filter((e=>$.includes(e.id))).map((e=>le([e.id,{matchingScore:e.matchingScore}])))).then((()=>{ie()})),N(!1),f(!1),y(!1),I(!1),u(!1),z([]),Q({signal:!1,resultData:null}),d(ce()),console.log("Finished All")):(0,F.NQ)({round:3,handleAnalyzeResult:ae,setIsAnalyzing:oe,passRoundProfiles:D});else{const e=r.filter((e=>$.includes(e.id))).map((e=>({...e,employee_Profile:{...e.employee_Profile,application:{...e.employee_Profile.application,matchingScore:null}}})));d(e),(0,F.NQ)({round:1,handleAnalyzeResult:ae,setIsAnalyzing:oe,resetMatchingScoreList:e,setAnalyzedProfile:ne,handleGoToAnalyzeResult:te})}},ve=()=>{Promise.all($.map((e=>le([e,{status:he}])))).then((()=>{ie()}))};(0,w.useEffect)((()=>{R.signal&&ae(R.resultData)}),[R.signal]),(0,w.useEffect)((()=>{if(V(!0),!X.length||!U.length||W)return void V(!1);const e=ce(),i=null===e||void 0===e?void 0:e.map((e=>(e.employee_Profile.application.id=e.id,e.employee_Profile.application)));JSON.stringify(i)!==JSON.stringify(v)&&(console.log("showList",i),h((()=>i))),JSON.stringify(e)!==JSON.stringify(r)&&d(e),V(!1)}),[JSON.stringify(n),JSON.stringify(X),JSON.stringify(U)]),(0,w.useEffect)((()=>{W&&ue()}),[W,m,x,A]);const[he,pe]=(0,w.useState)(null);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(p.A,{sx:{display:"block",float:{md:"right"},minWidth:{md:500},maxWidth:500},children:(0,O.jsxs)(o.Ay,{container:!0,sx:{alignItems:"center"},spacing:1,children:[(0,O.jsx)(o.Ay,{item:!0,md:3,xs:12,children:(0,O.jsxs)(j.A,{fontWeight:700,textAlign:"center",sx:{mt:{xs:2,md:0}},children:["\u0110\xe3 ch\u1ecdn: ",$.length]})}),(0,O.jsxs)(o.Ay,{item:!0,md:5,xs:12,display:"flex",children:[(0,O.jsx)(L.A,{options:P.J2,onChange:e=>{pe(e.target.value)},value:$.length>0?he:"",sx:{color:null===(i=P.J2.find((e=>e.value===he)))||void 0===i?void 0:i.optionColor},disabled:!$.length,label:"Duy\u1ec7t nhanh"}),(0,O.jsx)(S.A,{variant:"contained",size:"small",color:"info",sx:{py:1,px:0},onClick:()=>{(0,B.A)({selectedId:"_",handleConfirm:ve,message:"Chuy\u1ec3n c\xe1c h\u1ed3 s\u01a1 \u0111\xe3 ch\u1ecdn sang tr\u1ea1ng th\xe1i ".concat(M.q0[he],"?")})},disabled:!$.length||!he,children:(0,O.jsx)(E.A,{sx:{fontSize:15}})})]}),(0,O.jsx)(o.Ay,{item:!0,container:!0,md:4,xs:12,sx:{display:"flex",alignItems:"center"},children:(0,O.jsxs)(S.A,{onClick:()=>N($.length>0),variant:"contained",size:"small",disabled:W||!$.length,fullWidth:!0,sx:{py:1,px:0},children:[(0,O.jsx)(o.Ay,{item:!0,xs:c?9:12,children:$.length?W?"\u0110ang ph\xe2n t\xedch":"Ph\xe2n t\xedch nhanh":"Ch\u01b0a ch\u1ecdn h\u1ed3 s\u01a1"}),(0,O.jsx)(o.Ay,{item:!0,xs:c?3:0,children:c&&(0,O.jsx)(b.A,{size:18,color:"secondary"})})]})})]})}),(0,O.jsx)(g.A,{rows:v,columns:ee,initialState:{pagination:{paginationModel:{pageSize:l}},columns:{columnVisibilityModel:{jobTitle:!J.Fr,applicationType:!J.Fr,matchingScore:!J.Fr}}},hideFooter:!0,sx:{height:"74vh",width:"100%"},checkboxSelection:!0,disableRowSelectionOnClick:J.Fr,rowSelection:!0,onRowSelectionModelChange:e=>{G(e)},loading:Z||Y||H}),(0,O.jsx)(k.A,{currentPage:t,totalPages:a,handlePageChange:s,disabled:W})]})}const le=e=>{var i;const{isEmployer:l}=(0,v.n)(),{data:n,isLoading:o}=(0,c.useQuery)(["application-getList",null===e||void 0===e?void 0:e.page,null===e||void 0===e?void 0:e.status],(()=>u.D$.get({params:e})),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0,enabled:l});return{totalResults:null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.totalResults,isLoading:o}};var ne=l(67902);const oe=[{label:"T\u1ea5t c\u1ea3",value:""},{label:"\u0110\xe3 duy\u1ec7t",value:"\u0110\xe3 duy\u1ec7t"},{label:"Ch\u1edd duy\u1ec7t",value:"Ch\u1edd duy\u1ec7t"},{label:"T\u1eeb ch\u1ed1i",value:"T\u1eeb ch\u1ed1i"},{label:"H\u1ebft h\u1ea1n",value:"H\u1ebft h\u1ea1n"}],te=()=>{const[e,i]=(0,w.useState)({currentPage:1,currentTab:""}),{data:l,isLoading:c}=h({page:e.currentPage,num:9,status:e.currentTab}),{setApplicationList:u,resetApplicationList:v}=K(),{totalResults:p,isLoading:g}=le({status:e.currentTab}),m=Math.ceil(p/9)||1;return(0,w.useEffect)((()=>{console.log(l),u(l)}),[JSON.stringify(l)]),c||g?(0,O.jsx)(I.A,{}):(0,O.jsx)(n.A,{maxWidth:"xl",children:(0,O.jsx)(o.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,marginTop:0,children:(0,O.jsx)(o.Ay,{item:!0,xs:12,children:(0,O.jsxs)(t.A,{children:[(0,O.jsx)(a.A,{title:"Danh S\xe1ch \u1ee9ng vi\xean"}),(0,O.jsx)(s.A,{}),(0,O.jsxs)(r.A,{children:[(0,O.jsx)(ne.A,{onChange:(e,l)=>{v(),i((()=>({currentPage:1,currentTab:l})))},value:e.currentTab,variant:"scrollable",scrollButtons:!1,sx:{display:{md:"inline-block"},borderBottom:1,borderColor:"divider"},children:oe.map((e=>(0,O.jsx)(d.A,{label:e.label,value:e.value},e.value)))}),(0,O.jsx)(ie,{data:l,pageSize:9,currentPage:e.currentPage,totalPages:m,handlePageChange:e=>{i((i=>({...i,currentPage:e})))}})]})]})})})})}},95382:(e,i,l)=>{var n=l(32392);i.A=void 0;var o=n(l(40039)),t=l(70579),a=(0,o.default)((0,t.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");i.A=a}}]);
//# sourceMappingURL=751.5e7ca3a2.chunk.js.map