(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[1964],{97691:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});s(65043);var n=s(85865),i=s(70579);const o=e=>{let{acceptTypes:t,acceptSize_MB:s}=e;return(0,i.jsxs)(n.A,{fontSize:13,color:"grey.600",mt:1,children:["\u0110\u1ecbnh d\u1ea1ng file ",t.join(", ").replace(/application\//g,".")," v\xe0 dung l\u01b0\u1ee3ng "," <= ".concat(s," MB")]})}},55289:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(82907),i=s(36110),o=s(52105),l=s(86971);const r=()=>{const e=(0,n.useQueryClient)(),t=(0,l.Zp)(),{toast:s}=(0,i.n)(),{mutate:r,isLoading:a}=(0,n.useMutation)((e=>o.hT.updateWithoutId(e)),{onSuccess:n=>{200===n.status?(e.invalidateQueries("get-AttachedDocument"),s.success({massage:n.message}),t("/employee/recruitment-profile")):s.error({massage:n.message})},onError:e=>{s.error({massage:e.response.data.message})}});return{onUpdateData:r,isLoading:a}}},72974:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(82907),i=s(52105),o=s(65043),l=s(75614),r=s(36110),a=s(32109);const c=()=>{const{isEmployee:e}=(0,r.n)(),{setProfile:t}=(0,a.A)(),s=Boolean((0,l.getAccessToken)()),{data:c,isLoading:d,isSuccess:u,refetch:h}=(0,n.useQuery)(["get-AttachedDocument"],i.hT.get,{retry:(e,t)=>400!==t.response.status&&e<2,refetchOnWindowFocus:!1,enabled:s&&e});return(0,o.useEffect)((()=>{c&&t(c.data)}),[u]),{attachedDocument:null===c||void 0===c?void 0:c.data,isLoading:d,refetch:h}}},23508:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var n=s(65043),i=s(34535),o=s(19464),l=s(19252),r=s(85865),a=s(68903),c=s(53404),d=s(12220),u=s(39336),h=s(81637),p=s(44046),f=s(34233),x=s(62954),A=s(33173),m=s(24858),v=s(36110),g=s(69570),j=s(65099),y=s(32109),C=s(52247),w=s(97691),k=s(70579);const V=(0,i.Ay)("input")({display:"none"}),S=j.BZ.acceptTypes,b=j.BZ.acceptSize/1024/1024,z=e=>{var t;const{user:s}=(0,v.n)(),{setProfile:i,profile:a}=(0,y.A)(),{acceptTypes:d,acceptSize:z}=j.BZ,T={...s},[L,D]=(0,n.useState)(!1),[E,M]=(0,n.useState)(null),[B,F]=(0,n.useState)({file:null,url:""}),{control:I}=(0,m.mN)({defaultValues:T});(0,n.useEffect)((()=>{P()}),[a]);const P=async()=>{const e=await(0,g.TL)(null===a||void 0===a?void 0:a.CV).catch((()=>""));F({url:e,file:null})},Q=async e=>{M(!1),D(!0);const t=e.target.files[0];if(t&&d.includes(t.type)&&t.size<=z){const e=await(0,g.QM)(t);F({url:e,file:t}),i({CV:e})}else M(!0);D(!1)};return(0,k.jsxs)(l.A,{id:"cv",children:[(0,k.jsx)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,k.jsx)(o.A,{display:"flex",children:(0,k.jsx)(r.A,{fontWeight:700,fontSize:21,lineHeight:3,children:"T\u1ea3i CV \u0111\xednh k\xe8m"})})}),(0,k.jsx)(u.A,{}),(0,k.jsxs)(o.A,{py:2,children:[!(null!==B&&void 0!==B&&B.url)&&(0,k.jsxs)(o.A,{children:[(0,k.jsx)(r.A,{mb:2,color:"grey.700",children:(0,k.jsx)("em",{children:"* Vui l\xf2ng g\u1eedi l\xean CV xin vi\u1ec7c c\u1ee7a b\u1ea1n !"})}),E&&C.qz,(0,k.jsx)("label",{htmlFor:"CV",children:(0,k.jsxs)(c.A,{component:"label",startIcon:(0,k.jsx)(x.A,{}),variant:"outlined",color:"secondary",children:[(0,k.jsx)(A.A,{element:(0,k.jsx)(V,{type:"file",accept:".pdf"}),control:I,name:"CV",id:"CV",label:"CV \u0111\xednh k\xe8m",onChange:Q,required:!0}),"T\u1ea3i file"]})}),L&&(0,k.jsx)(h.A,{})]}),(null===B||void 0===B?void 0:B.url)&&(0,k.jsxs)(o.A,{children:[(0,k.jsxs)(o.A,{display:"flex",children:[(0,k.jsx)(f.A,{sx:{width:50,height:50},color:"info"}),(0,k.jsxs)(o.A,{justifyContent:"left",component:c.A,color:"inherit",width:"50%",onClick:()=>{window.open(B.url,"_blank")},children:[(null===B||void 0===B||null===(t=B.file)||void 0===t?void 0:t.name)||" CV cho v\u1ecb tr\xed c\xf4ng vi\u1ec7c ".concat((null===a||void 0===a?void 0:a.jobTitle)||""),L&&(0,k.jsx)(h.A,{})]}),E&&C.qz]}),(0,k.jsxs)(o.A,{display:"flex",children:[(0,k.jsxs)(c.A,{component:"label",startIcon:(0,k.jsx)(x.A,{}),variant:"text",color:"secondary",children:[(0,k.jsx)(A.A,{element:(0,k.jsx)(V,{type:"file",accept:".pdf"}),control:I,name:"CV",id:"CV",label:"CV \u0111\xednh k\xe8m",onChange:Q}),"T\u1ea3i file"]}),(0,k.jsx)(c.A,{component:"label",onClick:()=>{M(!1),D(!0),(0,g.Vr)(B.url),F({url:"",file:null}),i({CV:""}),D(!1)},startIcon:(0,k.jsx)(p.A,{}),variant:"text",color:"secondary",children:"X\xf3a file"})]})]}),(0,k.jsx)(w.A,{acceptTypes:S,acceptSize_MB:b})]})]})};var T=s(52047),L=s(37130),D=s(17913),E=s(25650);function M(){const{setProfile:e,profile:t}=(0,y.A)(),[s,i]=(0,n.useState)(null),o={profession:D.VL,workAddress:D.mo,positionLevel:D.F1,degree:D.$P,experience:D.P7,workingForm:D.pX};return(0,n.useEffect)((()=>{var e;i((e=t,{...e,profession:(0,E.NX)(null===e||void 0===e?void 0:e.profession,o.profession),workAddress:(0,E.NX)(null===e||void 0===e?void 0:e.workAddress,o.workAddress)}))}),[t]),(0,k.jsx)(L.A,{data:s,options:o,onSubmit:t=>{e({...t})}})}const B=n.memo(M);var F=s(39045),I=s(47298),P=s(76391),Q=s(82907),Z=s(52105),N=s(86971);const _=()=>{const e=(0,Q.useQueryClient)(),t=(0,N.Zp)(),{toast:s}=(0,v.n)(),n=Z.hT.create,{mutate:i,isLoading:o}=(0,Q.useMutation)(n,{onSuccess:n=>{200===n.status?(e.invalidateQueries("get-AttachedDocument"),s.success({massage:n.message}),t("/employee/recruitment-profile")):s.error({massage:n.message})},onError:e=>{s.error({massage:e.response.data.message})}});return{onSaveData:i,isLoading:o}};var H=s(55289),U=s(72974),W=s(62237),X=s(9052),q=s(91401),O=s(19290),J=s(60386),R=s(78910);const $=(0,i.Ay)(o.A)((e=>{let{theme:t}=e;return{background:"#ffff",marginBottom:t.spacing(4),boxShadow:"2px 2px 6px #aae2f7"}})),G=[{icon:(0,k.jsx)(I.A,{sx:{width:20}}),title:"T\u1ea3i CV \u0111\xednh k\xe8m",id:"cv"},{icon:(0,k.jsx)(I.A,{sx:{width:20}}),title:"Th\xf4ng tin c\xe1 nh\xe2n",id:"personal"},{icon:(0,k.jsx)(P.A,{sx:{width:20}}),title:"Th\xf4ng tin chung",id:"general"}];function K(){const{onSaveData:e}=_(),{onUpdateData:t}=(0,H.A)(),{setProfile:s,profile:i}=(0,y.A)(),{attachedDocument:o,isLoading:u}=(0,U.A)(),h=(0,N.Zp)(),[p,f]=(0,n.useState)(!1),[x,A]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{p&&h("/employee/recruitment-profile")}),[p]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(l.A,{children:[(0,k.jsx)(r.A,{mt:3,fontSize:22,fontWeight:700,children:"T\u1ea1o h\u1ed3 s\u01a1 \u0111\xednh k\xe8m"}),(0,k.jsxs)(a.Ay,{container:!0,columnSpacing:2,mt:2,children:[(0,k.jsx)(a.Ay,{item:!0,xs:10,children:G.map((e=>(0,k.jsxs)($,{children:["cv"===e.id&&(0,k.jsx)(z,{}),"personal"===e.id&&(0,k.jsx)(T.A,{}),"general"===e.id&&(0,k.jsx)(B,{})]},e.id)))}),(0,k.jsx)(a.Ay,{item:!0,xs:2,children:(0,k.jsx)($,{width:200,position:"sticky",top:60,children:(0,k.jsx)(F.A,{sections:G})})})]})]}),(0,k.jsxs)(X.A,{children:[(0,k.jsx)(c.A,{onClick:()=>{h("/employee/recruitment-profile")},variant:"outlined",color:"secondary",sx:{width:200},children:"Quay l\u1ea1i"}),(0,k.jsx)(c.A,{variant:"contained",sx:{width:200},onClick:async()=>{if(null!==i&&void 0!==i&&i.CV){A(!0);try{const s=await(0,g.TL)(null===i||void 0===i?void 0:i.CV),n=await fetch(s);if(null===n||void 0===n||!n.ok)throw new Error("Failed to fetch file");const o=await(null===n||void 0===n?void 0:n.blob()),l=await(0,J.A)(o),r=(0,R.V)(i,"document",l);(0,q.A)(O.uz,[r],null,{58:5,60:5}).then((s=>{const n=(0,R.Z)(s,JSON.stringify(r));null!==i&&void 0!==i&&i.userId?t({...i,keywords:(null===i||void 0===i?void 0:i.skills)+", "+n}):e({...i,keywords:(null===i||void 0===i?void 0:i.skills)+", "+n}),f(!0),A(!1)}))}catch(s){console.error("Error creating local URL:",s),A(!1)}}},children:"L\u01b0u h\u1ed3 s\u01a1"})]}),(0,k.jsx)(d.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:u||x,children:(0,k.jsx)(W.A,{})})]})}},62954:(e,t,s)=>{"use strict";var n=s(24994);t.A=void 0;var i=n(s(40039)),o=s(70579),l=(0,i.default)((0,o.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");t.A=l},34233:(e,t,s)=>{"use strict";var n=s(24994);t.A=void 0;var i=n(s(40039)),o=s(70579),l=(0,i.default)((0,o.jsx)("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-2 8c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm4 8H8v-.57c0-.81.48-1.53 1.22-1.85.85-.37 1.79-.58 2.78-.58.99 0 1.93.21 2.78.58.74.32 1.22 1.04 1.22 1.85V18z"}),"ContactPage");t.A=l},17406:()=>{},69851:()=>{},38586:()=>{},76149:()=>{},60933:()=>{},9193:()=>{}}]);
//# sourceMappingURL=1964.0a9c38e0.chunk.js.map