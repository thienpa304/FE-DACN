"use strict";(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[873],{59497:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(82907),i=n(36110),a=n(52105);const o=()=>{const e=(0,s.useQueryClient)(),{toast:t}=(0,i.n)(),{mutate:n,isLoading:o,isSuccess:r}=(0,s.useMutation)((e=>a.w0.updateWithoutId(e)),{onSuccess:n=>{200===n.status?(e.invalidateQueries("get-OnlineProfile"),t.success({massage:n.message})):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onUpdateData:n,isSuccess:r}}},54262:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(82907),i=n(52105),a=n(65043),o=n(75614),r=n(36110),l=n(35644);const d=()=>{const{isEmployee:e}=(0,r.n)(),{setProfile:t}=(0,l.A)(),n=Boolean((0,o.getAccessToken)()),{data:d,isLoading:c,isSuccess:u,refetch:h}=(0,s.useQuery)(["get-OnlineProfile"],i.w0.get,{retry:(e,t)=>404!==t.response.status&&e<2,refetchOnWindowFocus:!1,enabled:n&&e});return(0,a.useEffect)((()=>{d&&u&&t(null===d||void 0===d?void 0:d.data)}),[u]),{onlineProfile:null===d||void 0===d?void 0:d.data,isLoading:c,refetch:h}}},47873:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Be});var s=n(65043),i=n(19464),a=n(26240),o=n(19252),r=n(85865),l=n(68903),d=n(11906),c=n(47304),u=n(67254),h=n(40490),g=n(12220),m=n(52047),x=n(17945),f=n(82907),p=n(36110),v=n(52105);const j=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),n=v.w0.create,{mutate:s,isSuccess:i}=(0,f.useMutation)(n,{onSuccess:n=>{200===n.status?(e.invalidateQueries("get-OnlineProfile"),t.success({massage:n.message})):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveData:s,isSuccess:i}};var A=n(59497),y=n(56902),D=n(12197),S=n(35644),w=n(56743),b=n(70579);function M(){const{profile:e,setProfile:t}=(0,S.A)(),{onSaveData:n}=j(),{onUpdateData:i}=(0,A.A)(),[a,o]=(0,s.useState)(null),r={profession:y.VL,workAddress:y.mo,positionLevel:y.F1,degree:y.$P,experience:y.P7,workingForm:y.pX};return(0,s.useEffect)((()=>{var t;console.log(e),o((t=e,{...t,profession:(0,D.NX)(null===t||void 0===t?void 0:t.profession,r.profession),workAddress:(0,D.NX)(null===t||void 0===t?void 0:t.workAddress,r.workAddress)}))}),[e]),(0,b.jsx)(x.A,{data:a,options:r,onSubmit:t=>{(0,D.Oi)(t.degree,w.Ry);const s=t;null!==e&&void 0!==e&&e.userId?i(s):n(s)}})}var C=n(39336),k=n(81045),N=n(17392),I=n(36134),E=n(10697),_=n(91577),P=n(51726),z=n(65099),Q=n(51962),T=n(79190),Y=n(2306),L=n(33173),O=n(95851),F=n(24858);const W=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),n=v.V9.create,{mutate:s,isLoading:i}=(0,f.useMutation)(n,{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveData:s,isLoading:i}},V=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),{mutate:n,isLoading:s}=(0,f.useMutation)((e=>{let[t,n]=e;return v.y.update(t,n)}),{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveDataById:n,isLoading:s}};var B=n(67002),R=n(60446),G=n.n(R),H=n(80881),U=n(9971),q=n(95007);const X=()=>{const{work_experiences:e}=(0,U.G)(q.W6),t=(0,U.j)();return{work_experiences:e,setWorkExperience:e=>{t((0,q.E_)(e))}}};function Z(e){const{onSaveData:t}=W(),{onSaveDataById:n}=V(),{onClose:a,workId:o}=e,{profile:d,setProfile:c}=(0,S.A)(),{work_experiences:g,setWorkExperience:m}=X(),[x,f]=(0,s.useState)({state:!1,message:""}),{control:p,watch:v,reset:j,handleSubmit:A,formState:{errors:y}}=(0,F.mN)({defaultValues:{jobTitle:"",companyName:"",startDate:null,endDate:null,isDoing:!1,jobDescription:""}}),w=v("isDoing",!1),M=v("startDate"),k=v("endDate");(0,s.useEffect)((()=>{M&&k&&(G()(M).isAfter(k)?f({state:!0,message:"Ng\xe0y k\u1ebft th\xfac ph\u1ea3i sau ng\xe0y b\u1eaft \u0111\u1ea7u"}):f({state:!1,message:""})),w&&f({state:!1,message:""})}),[M,k,w]);return(0,s.useEffect)((()=>{var e;const t=(null===d||void 0===d||null===(e=d.work_experiences)||void 0===e?void 0:e.find((e=>e.id===o)))||(null===g||void 0===g?void 0:g.find((e=>e.id===o)));if(t){const e=(n=t).isDoing?{...n,startDate:(0,D.vd)(n.startDate),endDate:null}:{...n,startDate:(0,D.vd)(n.startDate),endDate:(0,D.vd)(n.endDate)};j(e)}var n}),[o,d]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.A,{}),(0,b.jsxs)(i.A,{py:3,children:[(0,b.jsxs)(l.Ay,{container:!0,mb:4,spacing:3,children:[(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(L.A,{element:(0,b.jsx)(O.A,{}),control:p,errors:y,fullWidth:!0,id:"jobTitle",label:"Ch\u1ee9c danh",name:"jobTitle",required:!0})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(L.A,{element:(0,b.jsx)(O.A,{}),control:p,errors:y,fullWidth:!0,id:"companyName",label:"C\xf4ng ty",name:"companyName",required:!0})}),(0,b.jsxs)(l.Ay,{item:!0,container:!0,xs:12,columnSpacing:3,children:[(0,b.jsxs)(l.Ay,{item:!0,xs:12,display:"flex",height:30,children:[(0,b.jsx)(L.A,{element:(0,b.jsx)(Q.A,{checked:w}),control:p,errors:y,fullWidth:!0,id:"isDoing",label:"T\xf4i \u0111ang l\xe0m \u1edf \u0111\xe2y",name:"isDoing",sx:{width:10,height:10,mr:1}}),(0,b.jsx)(T.A,{htmlFor:"isDoing",children:"T\xf4i \u0111ang l\xe0m \u1edf \u0111\xe2y"})]}),(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(L.A,{element:(0,b.jsx)(B.A,{}),control:p,errors:y,fullWidth:!0,id:"startDate",label:"Th\u1eddi gian b\u1eaft \u0111\u1ea7u",name:"startDate",maxDate:G()()})}),!w&&(0,b.jsx)(l.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsx)(L.A,{element:(0,b.jsx)(B.A,{}),control:p,errors:y,fullWidth:!0,id:"endDate",label:"Th\u1eddi gian k\u1ebft th\xfac",name:"endDate",maxDate:G()()})}),w&&(0,b.jsxs)(l.Ay,{item:!0,xs:12,sm:6,display:"flex",alignContent:"center",alignItems:"center",children:[(0,b.jsx)(Y.A,{}),(0,b.jsx)(r.A,{fontSize:20,children:"Hi\u1ec7n t\u1ea1i"})]})]}),x.state&&(0,b.jsx)(l.Ay,{item:!0,xs:12,children:(0,b.jsx)(u.A,{severity:"error",children:(0,b.jsx)(h.A,{children:x.message})})}),(0,b.jsx)(l.Ay,{item:!0,xs:12,children:(0,b.jsx)(L.A,{element:(0,b.jsx)(O.A,{}),control:p,errors:y,fullWidth:!0,id:"jobDescription",label:"M\xf4 t\u1ea3 c\xf4ng vi\u1ec7c",name:"jobDescription",minRows:3,required:!0,multiline:!0})})]}),(0,b.jsx)(H.A,{handleSubmit:A((async e=>{if(x.state)return;const s=(e=>e.isDoing?{...e,startDate:(0,D._g)(e.startDate),endDate:null}:{...e,startDate:(0,D._g)(e.startDate),endDate:(0,D._g)(e.endDate)})(e);e.id?n([e.id,s]):t(s),a()})),handleCancel:a})]})]})}const J=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),{mutate:n,isLoading:s}=(0,f.useMutation)((e=>v.y.remove(e)),{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onDeleteDataById:n,isLoading:s}};var K=n(71525);function $(e){const{onDeleteDataById:t}=J(),{profile:n}=(0,S.A)(),{work_experiences:a,setWorkExperience:o}=X(),[l,g]=(0,s.useState)([]),[m,x]=(0,s.useState)(null),[f,p]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),A=e=>{t(e)};return(0,s.useEffect)((()=>{null===n||void 0===n||!n.work_experiences||g(null===n||void 0===n?void 0:n.work_experiences)}),[n,a]),(0,b.jsxs)(b.Fragment,{children:[null===l||void 0===l?void 0:l.map((e=>(0,b.jsxs)(i.A,{display:"flex",columnGap:2,my:2,children:[(0,b.jsx)(i.A,{children:(0,b.jsx)(k.A,{src:z.XS.companyAvatar,variant:"rounded",sx:{bgcolor:"#a0b9cfc2",height:80,width:80},children:(0,b.jsx)(P.A,{})})}),(0,b.jsxs)(i.A,{display:"flex",flexDirection:"column",rowGap:"3px",flex:1,children:[(0,b.jsx)(r.A,{fontWeight:700,children:e.jobTitle}),(0,b.jsx)(r.A,{fontSize:12,children:e.companyName}),(0,b.jsxs)(r.A,{fontSize:12,children:[(0,D._g)(e.startDate)," -"," ",e.endDate&&"1899-11-30"!==e.endDate?(0,D._g)(e.endDate):"Hi\u1ec7n t\u1ea1i"]}),(0,b.jsxs)(i.A,{display:"flex",children:[(0,b.jsx)(r.A,{fontSize:12,children:"M\xf4 t\u1ea3 c\xf4ng vi\u1ec7c:\xa0"}),(0,b.jsx)(i.A,{children:(0,b.jsx)(r.A,{fontSize:12,children:e.jobDescription})})]})]}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(N.A,{onClick:()=>{return(t=e.id)&&x(t),void p(!0);var t},children:(0,b.jsx)(_.A,{})}),(0,b.jsx)(N.A,{onClick:()=>{return t=e.id,void(0,K.A)({selectedId:t,handleConfirm:A});var t},children:(0,b.jsx)(E.A,{})})]})]},e.id))),f&&(0,b.jsx)(Z,{workId:m,onClose:()=>p(!1),onlineProfile:n}),(!f||0===(null===l||void 0===l?void 0:l.length))&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.A,{fontSize:12,color:"grey.600",children:(0,b.jsxs)("em",{children:["M\xf4 t\u1ea3 kinh nghi\u1ec7m l\xe0m vi\u1ec7c c\u1ee7a b\u1ea1n c\xe0ng chi ti\u1ebft c\xe0ng t\u1ed1t, \u0111i\u1ec1u \u0111\xf3 gi\xfap b\u1ea1n c\xf3 c\u01a1 h\u1ed9i \u0111\u01b0\u1ee3c tuy\u1ec3n d\u1ee5ng cao h\u01a1n"," "]})}),(0,b.jsx)(C.A,{}),(0,b.jsx)(d.A,{variant:"text",color:"secondary",onClick:()=>{null!==n&&void 0!==n&&n.work_experiences?(x(null),p(!0)):j(!0)},startIcon:(0,b.jsx)(I.A,{fontSize:"large"}),sx:{my:1},children:(0,b.jsx)(r.A,{children:"Th\xeam kinh nghi\u1ec7m l\xe0m vi\u1ec7c"})}),(0,b.jsx)(c.A,{open:v,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:()=>j(!1),children:(0,b.jsx)(u.A,{severity:"error",children:(0,b.jsx)(h.A,{children:(0,b.jsx)("strong",{children:v&&"Vui l\xf2ng ho\xe0n th\xe0nh tr\u01b0\u1edbc ph\u1ea7n Th\xf4ng tin chung!"})})})})]})]})}function ee(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(o.A,{id:"work_experience",children:[(0,b.jsx)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,b.jsx)(i.A,{display:"flex",children:(0,b.jsx)(r.A,{fontWeight:700,fontSize:21,lineHeight:3,children:"Kinh nghi\u1ec7m ngh\u1ec1 nghi\u1ec7p"})})}),(0,b.jsx)(C.A,{}),(0,b.jsx)($,{})]})})}const te=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),n=v.IV.create,{mutate:s,isLoading:i}=(0,f.useMutation)(n,{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveData:s,isLoading:i}},ne=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),{mutate:n,isLoading:s}=(0,f.useMutation)((e=>{let[t,n]=e;return v.IV.update(t,n)}),{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveDataById:n,isLoading:s}},se=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),{mutate:n,isLoading:s}=(0,f.useMutation)((e=>v.IV.remove(e)),{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onDeleteDataById:n,isLoading:s}};var ie=n(83242),ae=n(96094),oe=n(48220),re=n(94918),le=n(95782),de=n(95540),ce=n(22505),ue=n(93513),he=n(94329),ge=n(74802),me=n(83462),xe=n(26600),fe=n(35316),pe=n(7968);const ve=["startDate","endDate"];function je(e){const{row:t,open:n,close:a,handleClose:o,title:r,columns:d,handleSave:c,handleUpdate:u}=e,{isMobile:h}=(0,pe.Qs)(),g=d.reduce(((e,t)=>(e[t.field]="",e)),{}),m=(0,s.useMemo)((()=>{const e={...t};return null!==t&&void 0!==t&&t.startDate&&(e.startDate=(0,D.vd)(null===t||void 0===t?void 0:t.startDate,"DD/MM/YYYY")),null!==t&&void 0!==t&&t.endDate&&(e.endDate=(0,D.vd)(null===t||void 0===t?void 0:t.endDate,"DD/MM/YYYY")),e}),[t]),{control:x,handleSubmit:f,reset:p,formState:{errors:v}}=(0,F.mN)({defaultValues:g});return(0,s.useEffect)((()=>{t||p(g),p(m)}),[t]),(0,b.jsxs)(me.A,{open:n,onClose:o,fullWidth:!0,maxWidth:"md",fullScreen:h,children:[(0,b.jsx)(xe.A,{sx:{textAlign:"center",fontWeight:700,fontSize:{md:"1.3rem",xs:"1rem"}},children:r}),(0,b.jsx)(C.A,{}),(0,b.jsx)(fe.A,{children:(0,b.jsxs)(i.A,{sx:{p:3},children:[(0,b.jsx)(l.Ay,{container:!0,spacing:3,mb:4,children:null===d||void 0===d?void 0:d.map(((e,t)=>"id"!==(null===e||void 0===e?void 0:e.field)&&(0,b.jsx)(l.Ay,{item:!0,xs:12,children:(0,b.jsx)(L.A,{element:ve.includes(null===e||void 0===e?void 0:e.field)?(0,b.jsx)(B.A,{}):(0,b.jsx)(O.A,{}),control:x,errors:v,fullWidth:!0,label:null===e||void 0===e?void 0:e.headerName,name:null===e||void 0===e?void 0:e.field,multiline:!0,required:!0})},t)))}),(0,b.jsx)(H.A,{handleSubmit:f((e=>{for(let t in e)if(e.hasOwnProperty(t)&&(console.log(t,ve.includes(t)),ve.includes(t))){const n=(0,D._g)(e[t]);e[t]=n}console.log(e),null!==t&&void 0!==t&&t.id?u(null===t||void 0===t?void 0:t.id,e):c(e),p(g),a()})),handleCancel:()=>a()})]})})]})}const Ae=e=>{const{columns:t,rows:n,handleSave:i,handleUpdate:a,handleDelete:o,profile:l,title:g,...m}=e,[x,f]=(0,s.useState)([]),[p,v]=(0,s.useState)([]),[j,A]=(0,s.useState)({}),[y,D]=(0,s.useState)({type:null,errorField:null}),[S,w]=(0,s.useState)({open:!1,row:null}),{isMobile:M}=(0,pe.Qs)();(0,s.useEffect)((()=>{f((null===n||void 0===n?void 0:n.length)>0?n:[]),v((null===n||void 0===n?void 0:n.length)>0?n:[])}),[n]);const C=e=>{f(x.filter((t=>t.id!==e))),o(e)},k=[{field:"actions",type:"actions",headerName:"Ch\u1ec9nh s\u1eeda",width:100,cellClassName:"actions",getActions:e=>{var t;let{id:n,row:s}=e;return(null===(t=j[n])||void 0===t?void 0:t.mode)===ie.V_.Edit?[(0,b.jsx)(re.Z,{icon:(0,b.jsx)(he.A,{}),label:"Save",sx:{color:"primary.main"},onClick:()=>(e=>{A({...j,[e]:{mode:ie.V_.View}})})(n)},"save"),(0,b.jsx)(re.Z,{icon:(0,b.jsx)(ge.A,{}),label:"Cancel",className:"textPrimary",onClick:()=>(e=>{A({...j,[e]:{mode:ie.V_.View,ignoreModifications:!0}}),x.find((t=>t.id===e)).isNew&&f(x.filter((t=>t.id!==e)))})(n),color:"inherit"},"cancel")]:[(0,b.jsx)(re.Z,{icon:(0,b.jsx)(de.A,{}),label:"Edit",className:"textPrimary",onClick:()=>M?(e=>{w({open:!0,row:e})})(s):(e=>{A({...j,[e]:{mode:ie.V_.Edit}})})(n),color:"inherit"},"edit"),(0,b.jsx)(re.Z,{icon:(0,b.jsx)(ue.A,{}),label:"Delete",onClick:()=>(e=>{(0,K.A)({selectedId:e,handleConfirm:C})})(n),color:"inherit"},"delete")]}}],N=[...t,...k];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(le.zh,{rows:x,columns:N,editMode:"row",rowModesModel:j,onRowModesModelChange:e=>{A(e)},onRowEditStop:(e,t)=>{e.reason===oe.q.rowFocusOut&&(t.defaultMuiPrevented=!0)},processRowUpdate:e=>{let n;const s=p.find((t=>t.id===e.id)),o=t.filter((t=>"date"===t.type&&(!G()(e[t.field]).isValid()||null===e[t.field]))).map((e=>e.headerName)),r=t.filter((t=>""===e[t.field])).map((e=>e.headerName));for(const i of t)"date"===i.type&&(e[i.field]=G()(e[i.field]).format("DD/MM/YYYY"));if(r.length>0)return void D({type:"missing",errorField:"".concat(r.join(", "))});if(o.length>0)return void D({type:"invalid",errorField:"".concat(o.join(", "))});s?(n={...e,isNew:!1},a(e.id,n)):(n={...e,isNew:!1},i({...e}));const l=x.map((t=>t.id===e.id?n:t));return f(l),n},disableColumnMenu:!0,hideFooterSelectedRowCount:!0,initialState:{pagination:{paginationModel:{pageSize:5}}},slots:{toolbar:function(e){const{setCurrentRows:n,setRowModesModel:s}=e;return(0,b.jsx)(ae.b,{children:(0,b.jsx)(d.A,{color:"secondary",startIcon:(0,b.jsx)(ce.A,{}),onClick:()=>{var e;if(M)return console.log(S),void w((()=>({open:!0,row:null})));if(null===l||void 0===l||!l.userId)return void D({type:"noProfile",errorField:null});if(null!==(e=x[0])&&void 0!==e&&e.isNew)return;const i="".concat(Math.floor(1e4*Math.random())).concat(Math.random().toString(36).substring(2,7)),a={id:i,isNew:!0},o=t.reduce(((e,t)=>({...e,[t.field]:""})),a);n((e=>[o,...e])),s((e=>({...e,[i]:{mode:ie.V_.Edit,fieldToFocus:t[0].field}})))},children:(0,b.jsx)(r.A,{sx:{fontWeight:700,fontSize:16},children:"Th\xeam m\u1edbi"})})})}},slotProps:{toolbar:{setCurrentRows:f,setRowModesModel:A}},getRowHeight:()=>"auto",sx:{minHeight:208,"&.MuiDataGrid-root--densityCompact .MuiDataGrid-cell":{py:"8px"},"&.MuiDataGrid-root--densityStandard .MuiDataGrid-cell":{py:"15px"},"&.MuiDataGrid-root--densityComfortable .MuiDataGrid-cell":{py:"22px"},".MuiDataGrid-columnHeaderTitle":{fontWeight:700}},...m}),(0,b.jsx)(c.A,{open:null===y||void 0===y?void 0:y.type,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:()=>D({type:null,errorField:null}),children:(0,b.jsxs)(u.A,{severity:"error",children:[(0,b.jsxs)(h.A,{children:["missing"===(null===y||void 0===y?void 0:y.type)&&"Ch\u01b0a nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin","invalid"===(null===y||void 0===y?void 0:y.type)&&"Th\u1eddi gian kh\xf4ng h\u1ee3p l\u1ec7",(0,b.jsx)("strong",{children:"noProfile"===(null===y||void 0===y?void 0:y.type)&&"Vui l\xf2ng ho\xe0n th\xe0nh tr\u01b0\u1edbc ph\u1ea7n Th\xf4ng tin chung!"})]}),(0,b.jsx)("strong",{children:null===y||void 0===y?void 0:y.errorField})]})}),(0,b.jsx)(je,{row:S.row,open:S.open,close:()=>w((()=>({open:!1,row:null}))),title:g,handleSave:i,handleUpdate:a,columns:t})]})},ye={".css-i4bv87-MuiSvgIcon-root":{height:"14px",width:"14px"},".css-1qrfzum-MuiButtonBase-root-MuiIconButton-root":{paddingX:"0px",marginRight:"-5px"},".css-yykmq0-MuiInputBase-input-MuiOutlinedInput-input":{paddingX:0,marginX:0},".css-33lv7h-MuiInputBase-root-MuiOutlinedInput-root":{fontSize:"12px",paddingRight:0,paddingLeft:"-100px"}};function De(){const{isMobile:e}=(0,pe.Qs)(),{profile:t,setProfile:n}=(0,S.A)(),{onSaveData:a}=te(),{onSaveDataById:l}=ne(),{onDeleteDataById:d}=se(),[g,m]=(0,s.useState)([]),[x,f]=(0,s.useState)({state:!1,message:""});(0,s.useEffect)((()=>{var e;const n=null===t||void 0===t?void 0:t.education_informations,s=n?JSON.parse(JSON.stringify(n)):[];s&&(e=>{e.map((e=>{e.startDate=(0,D._g)(e.startDate),e.endDate=(0,D._g)(e.endDate)}))})(s),m((null===t||void 0===t||null===(e=t.education_informations)||void 0===e?void 0:e.length)>0?s:[])}),[t]);const p=e=>!G()(e.startDate,"DD/MM/YYYY").isAfter(G()(e.endDate,"DD/MM/YYYY"))||(f({state:!0,message:"Ng\xe0y k\u1ebft th\xfac ph\u1ea3i sau ng\xe0y b\u1eaft \u0111\u1ea7u"}),!1),v=(e,t)=>{e.api.setEditCellValue({...e,value:t})},j=[{field:"id",headerName:"ID"},{field:"schoolName",headerName:"Tr\u01b0\u1eddng/ Trung t\xe2m \u0111\xe0o t\u1ea1o",width:e?190:240,editable:!0},{field:"specialization",headerName:"Chuy\xean ng\xe0nh",width:220,editable:!0},{field:"degreeName",headerName:"T\xean ch\u1ee9ng ch\u1ec9",width:150,editable:!0},{field:"startDate",headerName:"B\u1eaft \u0111\u1ea7u",type:"date",width:110,editable:!0,valueGetter:e=>G()(e.value,"DD/MM/YYYY").toDate(),valueFormatter:e=>(0,D._g)(e.value),renderEditCell:e=>(0,b.jsx)(B.A,{sx:ye,onChange:t=>v(e,t),value:e.value})},{field:"endDate",headerName:"K\u1ebft th\xfac",type:"date",width:110,editable:!0,valueGetter:e=>G()(e.value,"DD-MM-YYYY").toDate(),valueFormatter:e=>(0,D._g)(e.value),renderEditCell:e=>(0,b.jsx)(B.A,{sx:ye,onChange:t=>v(e,t),value:e.value})}];return(0,b.jsxs)(o.A,{id:"education",children:[(0,b.jsx)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,b.jsx)(i.A,{display:"flex",children:(0,b.jsx)(r.A,{fontWeight:700,fontSize:21,lineHeight:3,children:"Th\xf4ng tin h\u1ecdc v\u1ea5n"})})}),(0,b.jsx)(C.A,{}),(0,b.jsx)(i.A,{pt:3,pb:6,children:(0,b.jsx)(Ae,{profile:t,rows:g,columns:j,title:"Th\xf4ng tin h\u1ecdc v\u1ea5n",handleSave:e=>{p(e)&&a(e)},handleUpdate:(e,t)=>{p(t)&&l([e,t])},handleDelete:e=>{d(e)},initialState:{pagination:{paginationModel:{pageSize:5}},columns:{columnVisibilityModel:{specialization:!e,degreeName:!e,startDate:!e,endDate:!e,id:!1}}}})}),(0,b.jsx)(c.A,{open:null===x||void 0===x?void 0:x.state,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:5e3,onClose:()=>f({state:!1,message:""}),children:(0,b.jsxs)(u.A,{severity:"error",children:[(0,b.jsx)(h.A,{children:(0,b.jsx)("strong",{children:null===x||void 0===x?void 0:x.message})}),"D\u1eef li\u1ec7u c\u1ee7a b\u1ea1n s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i"]})})]})}var Se=n(10611);const we=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),n=v.ae.create,{mutate:s,isLoading:i}=(0,f.useMutation)(n,{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveData:s,isLoading:i}},be=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),{mutate:n,isLoading:s}=(0,f.useMutation)((e=>{let[t,n]=e;return v.ae.update(t,n)}),{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onSaveDataById:n,isLoading:s}},Me=()=>{const e=(0,f.useQueryClient)(),{toast:t}=(0,p.n)(),{mutate:n,isLoading:s}=(0,f.useMutation)((e=>v.ae.remove(e)),{onSuccess:n=>{200===n.status?(t.success({massage:n.message}),e.invalidateQueries("get-OnlineProfile")):t.error({massage:n.message})},onError:e=>{t.error({massage:e.response.data.message})}});return{onDeleteDataById:n,isLoading:s}};const Ce=function(){const{isMobile:e}=(0,pe.Qs)(),{profile:t}=(0,S.A)(),{onSaveData:n}=we(),{onSaveDataById:a}=be(),{onDeleteDataById:l}=Me(),[d,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]);(0,s.useEffect)((()=>{null!==t&&void 0!==t&&t.another_degrees&&t.another_degrees.length>0&&h(t.another_degrees)}),[t]);const g=[{field:"id",headerName:"ID"},{field:"degreeName",headerName:"Ch\u1ee9ng ch\u1ec9",width:e?190:420,editable:!0},{field:"level",headerName:"M\u1ee9c \u0111\u1ed9 th\xe0nh th\u1ea1o",width:410,editable:!0}];return d?(0,b.jsx)(i.A,{sx:{width:"100%"},children:(0,b.jsx)(Se.A,{})}):(0,b.jsxs)(o.A,{id:"other_degree",children:[(0,b.jsx)(i.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,b.jsx)(i.A,{display:"flex",children:(0,b.jsx)(r.A,{fontWeight:700,fontSize:21,lineHeight:3,children:"Nh\u1eefng ch\u1ee9ng ch\u1ec9 kh\xe1c"})})}),(0,b.jsx)(C.A,{}),(0,b.jsx)(i.A,{pt:3,pb:6,children:(0,b.jsx)(Ae,{rows:u,columns:g,title:"Th\xf4ng tin ch\u1ee9ng ch\u1ec9",handleSave:async e=>{c(!0);const t={...e};n(t),c(!1)},handleUpdate:async(e,t)=>{c(!0);const n={...t};a([e,n]),c(!1)},handleDelete:async e=>{c(!0),l(e),c(!1)},profile:t,initialState:{pagination:{paginationModel:{pageSize:5}},columns:{columnVisibilityModel:{level:!e,id:!1}}}})})]})};var ke=n(39045),Ne=n(47298),Ie=n(76391),Ee=n(54983),_e=n(83510),Pe=n(17916),ze=n(54262),Qe=n(62237),Te=n(9052),Ye=n(86971),Le=n(78910),Oe=n(4020),Fe=n(19217);const We=e=>{let{children:t}=e;return(0,b.jsx)(i.A,{bgcolor:"#ffff",sx:{mb:4,boxShadow:"2px 2px 6px #aae2f7"},children:t})},Ve=[{icon:(0,b.jsx)(Ne.A,{sx:{width:20}}),title:"Th\xf4ng tin c\xe1 nh\xe2n",id:"personal"},{icon:(0,b.jsx)(Ie.A,{sx:{width:20}}),title:"Th\xf4ng tin chung",id:"general"},{icon:(0,b.jsx)(Ee.A,{sx:{width:20}}),title:"Th\xf4ng tin ngh\u1ec1 nghi\u1ec7p",id:"work_experience"},{icon:(0,b.jsx)(_e.A,{sx:{width:20}}),title:"Th\xf4ng tin h\u1ecdc v\u1ea5n",id:"education"},{icon:(0,b.jsx)(Pe.A,{sx:{width:20}}),title:"Nh\u1eefng ch\u1ee9ng ch\u1ec9 kh\xe1c",id:"other_degree"}];function Be(){const[e,t]=(0,s.useState)(!1),[n,x]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!1),{onlineProfile:v,isLoading:j}=(0,ze.A)(),{profile:y,setProfile:D}=(0,S.A)(),{onUpdateData:w}=(0,A.A)(),C=(0,Ye.Zp)(),k=(0,a.A)(),N=(0,pe.fZ)(k);return(0,s.useEffect)((()=>{n&&C("/employee/recruitment-profile")}),[n]),(0,s.useEffect)((()=>{D(v)}),[v]),j?(0,b.jsx)(Qe.A,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(o.A,{children:[(0,b.jsx)(r.A,{mt:3,fontSize:22,fontWeight:700,children:"T\u1ea1o h\u1ed3 s\u01a1 tr\u1ef1c tuy\u1ebfn"}),(0,b.jsxs)(l.Ay,{container:!0,columnSpacing:2,mt:2,children:[(0,b.jsx)(l.Ay,{item:!0,xs:N?12:10,children:Ve.map((e=>(0,b.jsxs)(We,{children:["personal"===e.id&&(0,b.jsx)(m.A,{}),"general"===e.id&&(0,b.jsx)(M,{}),"work_experience"===e.id&&(0,b.jsx)(ee,{}),"education"===e.id&&(0,b.jsx)(De,{}),"other_degree"===e.id&&(0,b.jsx)(Ce,{})]},e.id)))}),(0,b.jsx)(l.Ay,{item:!0,xs:N?0:2,sx:{display:{xs:"none",sm:"inline"}},children:(0,b.jsx)(i.A,{bgcolor:"#ffff",sx:{boxShadow:"2px 2px 6px #aae2f7"},width:200,position:"sticky",top:60,children:(0,b.jsx)(ke.A,{sections:Ve})})})]})]},"online"),(0,b.jsxs)(Te.A,{children:[(0,b.jsx)(d.A,{onClick:async()=>{x(!0)},variant:"outlined",color:"secondary",sx:{width:200},children:"Quay l\u1ea1i"}),(0,b.jsx)(d.A,{variant:"contained",sx:{width:200},onClick:async()=>{if(p(!0),null!==y&&void 0!==y&&y.userId){const e=(0,Le.V)(y,"online"),t=await(0,Oe.A)(Fe.uz,[e],null,{58:5,60:5}),n=await(0,Oe.A)(Fe.Tl,t),s=(0,Le.Z)(n);w({...y,keywords:(null===y||void 0===y?void 0:y.skills)+", "+s}),x(!0),p(!1)}else t(!0),p(!1)},children:"L\u01b0u h\u1ed3 s\u01a1"})]}),(0,b.jsx)(c.A,{open:e,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:3e3,onClose:()=>t(!1),children:(0,b.jsx)(u.A,{severity:"error",children:(0,b.jsx)(h.A,{children:e&&"Vui l\xf2ng cung c\u1ea5p th\xf4ng tin chung"})})}),(0,b.jsx)(g.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:f,children:(0,b.jsx)(Qe.A,{})})]})}}}]);
//# sourceMappingURL=873.11029c48.chunk.js.map