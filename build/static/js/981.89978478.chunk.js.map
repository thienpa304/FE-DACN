{"version":3,"file":"static/js/981.89978478.chunk.js","mappings":"8JAEO,MAAMA,EAAqB,IAAIC,EAAAA,EAAY,yBACrCC,EAA2B,IAAID,EAAAA,EAC1C,yBAEWE,EAAsB,IAAIF,EAAAA,EAAY,yBACtCG,EAA0B,IAAIH,EAAAA,EACzC,qC,2FCAa,SAASI,EAAiCC,GACvD,MAAM,WAAEC,IAAeC,EAAAA,EAAAA,KACvB,IAAKF,EAAI,MAAO,CAAC,EACjB,MAAM,KAAEG,EAAI,UAAEC,IAAcC,EAAAA,EAAAA,UAI1B,CAAC,sBAAuBL,IACxBM,SAAYV,EAAAA,GAAyBW,QAAQP,IAC7C,CACEQ,MAAO,EACPC,sBAAsB,EACtBC,kBAAkB,EAClBC,QAASV,IAIb,MAAO,CACLE,KAAU,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KACZC,YAEJ,CAEO,SAASQ,EAAqCC,GACnD,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAC9B,KAEI,KAAEb,EAAI,UAAEC,EAAS,QAAEa,IAAYZ,EAAAA,EAAAA,UAInC,CAAC,0BAA2Ba,KAAKC,UAAUN,KAC3CP,UACE,IAAKO,EAAOO,OAAQ,MAAO,GAC3BC,QAAQC,WACNT,EAAOU,KAAKvB,GAAOJ,EAAAA,GAAyBW,QAAQP,MAEnDwB,MAAMC,IAEL,MAIMX,EAJmBW,EAAQC,QAC9BC,GACmB,cAAlBA,EAAOC,SAEuBL,KAAKI,GAAWA,EAAOE,QAGzDd,EAAYD,EAAS,IAEtBgB,OAAOC,GAAMC,QAAQC,IAAIF,IAAG,GAEjC,CACEvB,MAAO,EACPC,sBAAsB,EACtBC,kBAAkB,IAItB,MAAO,CACLP,KAAc,OAARW,QAAQ,IAARA,OAAQ,EAARA,EAAUS,KAAKW,GAAa,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM/B,OACpCC,YACAa,UAEJ,C,gGClEe,SAASkB,EAAoBC,GAAY,IAAX,KAAEC,GAAMD,EACnD,MAAM,MAAEE,IAAUC,EAAAA,EAAAA,MACZC,EAAQF,GACR,cAAEG,GAAkBD,GACpB,KAAErC,IAASJ,EAAAA,EAAAA,GAAiC0C,GAElD,OAAOC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,CAACN,KAAMlC,GACvB,C","sources":["modules/application/applicationService.ts","modules/application/hooks/useQueryCandidateApplicationById.ts","pages/view-candidate-profile/index.tsx"],"sourcesContent":["import BaseService from 'src/common/base-service';\r\n\r\nexport const ApplicationService = new BaseService('employee/applications');\r\nexport const CandidateProfilesService = new BaseService(\r\n  'employer/applications'\r\n);\r\nexport const UpdateStatusService = new BaseService('employer/applications');\r\nexport const ApplicationTotalResults = new BaseService(\r\n  'employer/applications/totalResults'\r\n);\r\n","import { AxiosError } from 'axios';\r\nimport { useQuery } from 'react-query';\r\nimport { ResponseData } from 'src/common/http-request';\r\nimport { Application, EmployeeApplication } from '../model';\r\nimport { CandidateProfilesService } from '../applicationService';\r\nimport { useEffect, useState } from 'react';\r\nimport { useApp } from 'src/modules/app/hooks';\r\n\r\nexport default function useQueryCandidateApplicationById(id) {\r\n  const { isEmployer } = useApp();\r\n  if (!id) return {};\r\n  const { data, isLoading } = useQuery<\r\n    ResponseData<EmployeeApplication>,\r\n    AxiosError<ResponseData<EmployeeApplication>>\r\n  >(\r\n    ['application-getById', id],\r\n    async () => CandidateProfilesService.getById(id),\r\n    {\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n      keepPreviousData: true,\r\n      enabled: isEmployer\r\n    }\r\n  );\r\n\r\n  return {\r\n    data: data?.data,\r\n    isLoading\r\n  };\r\n}\r\n\r\nexport function useQueryCandidateApplicationByIdList(idList: number[]) {\r\n  const [dataList, setDataList] = useState<ResponseData<EmployeeApplication>[]>(\r\n    []\r\n  );\r\n  const { data, isLoading, refetch } = useQuery<\r\n    ResponseData<EmployeeApplication>[],\r\n    AxiosError<ResponseData<EmployeeApplication>[]>\r\n  >(\r\n    ['application-getByIdList', JSON.stringify(idList)],\r\n    async () => {\r\n      if (!idList.length) return [];\r\n      Promise.allSettled(\r\n        idList.map((id) => CandidateProfilesService.getById(id))\r\n      )\r\n        .then((results) => {\r\n          // Lọc ra các kết quả thành công và chỉ lưu dữ liệu của các promise đã được giải quyết vào dataList\r\n          const fulfilledResults = results.filter(\r\n            (result): result is PromiseFulfilledResult<any> =>\r\n              result.status === 'fulfilled'\r\n          );\r\n          const dataList = fulfilledResults.map((result) => result.value);\r\n\r\n          // Cập nhật dataList\r\n          setDataList(dataList);\r\n        })\r\n        .catch((e) => console.log(e));\r\n    },\r\n    {\r\n      retry: 1,\r\n      refetchOnWindowFocus: false,\r\n      keepPreviousData: true\r\n    }\r\n  );\r\n\r\n  return {\r\n    data: dataList?.map((item) => item?.data),\r\n    isLoading,\r\n    refetch\r\n  };\r\n}\r\n","import CVPage from './ViewCV';\r\nimport useQueryCandidateApplicationById from 'src/modules/application/hooks/useQueryCandidateApplicationById';\r\nimport { useLocation } from 'react-router';\r\n\r\nexport default function ViewCandidateProfile({ user }) {\r\n  const { state } = useLocation();\r\n  const param = state as any;\r\n  const { applicationId } = param;\r\n  const { data } = useQueryCandidateApplicationById(applicationId);\r\n\r\n  return <CVPage user={data} />;\r\n}\r\n"],"names":["ApplicationService","BaseService","CandidateProfilesService","UpdateStatusService","ApplicationTotalResults","useQueryCandidateApplicationById","id","isEmployer","useApp","data","isLoading","useQuery","async","getById","retry","refetchOnWindowFocus","keepPreviousData","enabled","useQueryCandidateApplicationByIdList","idList","dataList","setDataList","useState","refetch","JSON","stringify","length","Promise","allSettled","map","then","results","filter","result","status","value","catch","e","console","log","item","ViewCandidateProfile","_ref","user","state","useLocation","param","applicationId","_jsx","CVPage"],"sourceRoot":""}