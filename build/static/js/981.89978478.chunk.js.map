{"version":3,"file":"static/js/981.89978478.chunk.js","mappings":"8JAEO,MAAMA,EAAqB,IAAIC,EAAAA,EAAY,yBACrCC,EAA2B,IAAID,EAAAA,EAC1C,yBAEWE,EAAsB,IAAIF,EAAAA,EAAY,yBACtCG,EAA0B,IAAIH,EAAAA,EACzC,qC,2FCAa,SAASI,EAAiCC,GACvD,MAAM,WAAEC,IAAeC,EAAAA,EAAAA,KACvB,IAAKF,EAAI,MAAO,CAAC,EACjB,MAAM,KAAEG,EAAI,UAAEC,IAAcC,EAAAA,EAAAA,UAI1B,CAAC,sBAAuBL,IACxBM,SAAYV,EAAAA,GAAyBW,QAAQP,IAC7C,CACEQ,MAAO,EACPC,sBAAsB,EACtBC,kBAAkB,EAClBC,QAASV,IAIb,MAAO,CACLE,KAAU,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KACZC,YAEJ,CAEO,SAASQ,EAAqCC,GACnD,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAC9B,KAEI,KAAEb,EAAI,UAAEC,EAAS,QAAEa,IAAYZ,EAAAA,EAAAA,UAInC,CAAC,0BAA2Ba,KAAKC,UAAUN,KAC3CP,UACE,IAAKO,EAAOO,OAAQ,MAAO,GAC3BC,QAAQC,WACNT,EAAOU,KAAKvB,GAAOJ,EAAAA,GAAyBW,QAAQP,MAEnDwB,MAAMC,IAEL,MAIMX,EAJmBW,EAAQC,QAC9BC,GACmB,cAAlBA,EAAOC,SAEuBL,KAAKI,GAAWA,EAAOE,QAGzDd,EAAYD,EAAS,IAEtBgB,OAAOC,GAAMC,QAAQC,IAAIF,IAAG,GAEjC,CACEvB,MAAO,EACPC,sBAAsB,EACtBC,kBAAkB,IAItB,MAAO,CACLP,KAAc,OAARW,QAAQ,IAARA,OAAQ,EAARA,EAAUS,KAAKW,GAAa,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM/B,OACpCC,YACAa,UAEJ,C,gGClEe,SAASkB,EAAoBC,GAAY,IAAX,KAAEC,GAAMD,EACnD,MAAM,MAAEE,IAAUC,EAAAA,EAAAA,MACZC,EAAQF,GACR,cAAEG,GAAkBD,GACpB,KAAErC,IAASJ,EAAAA,EAAAA,GAAiC0C,GAElD,OAAOC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,CAACN,KAAMlC,GACvB,C","sources":["modules/application/applicationService.ts","modules/application/hooks/useQueryCandidateApplicationById.ts","pages/view-candidate-profile/index.tsx"],"sourcesContent":["import BaseService from 'src/common/base-service';\n\nexport const ApplicationService = new BaseService('employee/applications');\nexport const CandidateProfilesService = new BaseService(\n  'employer/applications'\n);\nexport const UpdateStatusService = new BaseService('employer/applications');\nexport const ApplicationTotalResults = new BaseService(\n  'employer/applications/totalResults'\n);\n","import { AxiosError } from 'axios';\nimport { useQuery } from 'react-query';\nimport { ResponseData } from 'src/common/http-request';\nimport { Application, EmployeeApplication } from '../model';\nimport { CandidateProfilesService } from '../applicationService';\nimport { useEffect, useState } from 'react';\nimport { useApp } from 'src/modules/app/hooks';\n\nexport default function useQueryCandidateApplicationById(id) {\n  const { isEmployer } = useApp();\n  if (!id) return {};\n  const { data, isLoading } = useQuery<\n    ResponseData<EmployeeApplication>,\n    AxiosError<ResponseData<EmployeeApplication>>\n  >(\n    ['application-getById', id],\n    async () => CandidateProfilesService.getById(id),\n    {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      keepPreviousData: true,\n      enabled: isEmployer\n    }\n  );\n\n  return {\n    data: data?.data,\n    isLoading\n  };\n}\n\nexport function useQueryCandidateApplicationByIdList(idList: number[]) {\n  const [dataList, setDataList] = useState<ResponseData<EmployeeApplication>[]>(\n    []\n  );\n  const { data, isLoading, refetch } = useQuery<\n    ResponseData<EmployeeApplication>[],\n    AxiosError<ResponseData<EmployeeApplication>[]>\n  >(\n    ['application-getByIdList', JSON.stringify(idList)],\n    async () => {\n      if (!idList.length) return [];\n      Promise.allSettled(\n        idList.map((id) => CandidateProfilesService.getById(id))\n      )\n        .then((results) => {\n          // Lọc ra các kết quả thành công và chỉ lưu dữ liệu của các promise đã được giải quyết vào dataList\n          const fulfilledResults = results.filter(\n            (result): result is PromiseFulfilledResult<any> =>\n              result.status === 'fulfilled'\n          );\n          const dataList = fulfilledResults.map((result) => result.value);\n\n          // Cập nhật dataList\n          setDataList(dataList);\n        })\n        .catch((e) => console.log(e));\n    },\n    {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      keepPreviousData: true\n    }\n  );\n\n  return {\n    data: dataList?.map((item) => item?.data),\n    isLoading,\n    refetch\n  };\n}\n","import CVPage from './ViewCV';\nimport useQueryCandidateApplicationById from 'src/modules/application/hooks/useQueryCandidateApplicationById';\nimport { useLocation } from 'react-router';\n\nexport default function ViewCandidateProfile({ user }) {\n  const { state } = useLocation();\n  const param = state as any;\n  const { applicationId } = param;\n  const { data } = useQueryCandidateApplicationById(applicationId);\n\n  return <CVPage user={data} />;\n}\n"],"names":["ApplicationService","BaseService","CandidateProfilesService","UpdateStatusService","ApplicationTotalResults","useQueryCandidateApplicationById","id","isEmployer","useApp","data","isLoading","useQuery","async","getById","retry","refetchOnWindowFocus","keepPreviousData","enabled","useQueryCandidateApplicationByIdList","idList","dataList","setDataList","useState","refetch","JSON","stringify","length","Promise","allSettled","map","then","results","filter","result","status","value","catch","e","console","log","item","ViewCandidateProfile","_ref","user","state","useLocation","param","applicationId","_jsx","CVPage"],"sourceRoot":""}