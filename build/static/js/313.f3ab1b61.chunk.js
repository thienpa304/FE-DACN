"use strict";(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[313],{67902:(e,l,n)=>{n.d(l,{A:()=>o});var i=n(34535),t=n(69869);const o=(0,i.Ay)(t.A)((()=>"\n    .MuiTabs-scrollableX {\n    overflow-x: auto !important;\n      }\n  "))},24313:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ee});var i=n(19252),t=n(68903),o=n(12110),a=n(79958),s=n(39336),r=n(26494),d=n(24056),c=n(82907),u=n(52404),h=n(36110);const p=e=>{var l,n,i,t,o,a,s,r,d,p,m,v,g,x;const{isEmployer:A}=(0,h.n)(),{data:f,isLoading:y,refetch:j,isFetching:S}=(0,c.useQuery)(["application-getList",e],(()=>u.DG.get({params:e})),{keepPreviousData:!0,retry:1,refetchOnWindowFocus:!1,enabled:A});return console.log("...api...",null===f||void 0===f||null===(l=f.data)||void 0===l||null===(n=l.meta)||void 0===n?void 0:n.itemCount),{data:(null===f||void 0===f||null===(i=f.data)||void 0===i||null===(t=i.items)||void 0===t?void 0:t.map((e=>({...e,id:e.application_id}))))||[],totalItems:null===f||void 0===f||null===(o=f.data)||void 0===o||null===(a=o.meta)||void 0===a?void 0:a.totalItems,itemCount:null===f||void 0===f||null===(s=f.data)||void 0===s||null===(r=s.meta)||void 0===r?void 0:r.itemCount,itemPerPage:null===f||void 0===f||null===(d=f.data)||void 0===d||null===(p=d.meta)||void 0===p?void 0:p.itemPerPage,totalPages:null===f||void 0===f||null===(m=f.data)||void 0===m||null===(v=m.meta)||void 0===v?void 0:v.totalPages,currentPage:null===f||void 0===f||null===(g=f.data)||void 0===g||null===(x=g.meta)||void 0===x?void 0:x.currentPage,isLoading:y,refetch:j,isFetching:S}};var m=n(19464),v=n(28800),g=n(83462),x=n(26600),A=n(17392),f=n(35316),y=n(28883),j=n(77739),S=n(85865),b=n(11906),C=n(81637),P=n(59162);const _=()=>{const e=(0,c.useQueryClient)(),{toast:l}=(0,h.n)(),{isLoading:n,mutateAsync:i}=(0,c.useMutation)((e=>{let[l,n]=e;return u.zP.update(l,n)}),{onSuccess:n=>{200===n.status?(e.invalidateQueries(["application-getList"]),l.success({massage:n.message})):l.error({massage:n.message})},onError:e=>{l.error({massage:e.response.data.message})}});return{onSaveApplicationStatus:i,isLoading:n}};var F=n(65043),T=n(49768),z=n(42445),w=n(62237),k=n(21886),I=n(25567),W=n(84391),L=n(74802),D=n(19193),E=n(60427),M=n(14015),N=n(70579);const B=function(e){let{profile:l}=e;const n=document.createElement("div"),i=(0,W.H)(n);document.body.appendChild(n),i.render((0,N.jsx)(E.A,{children:(0,N.jsxs)(g.A,{open:!0,fullWidth:!0,maxWidth:"md",fullScreen:M.Fr,children:[(0,N.jsxs)(x.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["H\u1ed3 s\u01a1 ng\u01b0\u1eddi d\xf9ng",(0,N.jsx)(A.A,{"aria-label":"close",onClick:()=>{i.unmount()},sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,N.jsx)(L.A,{})})]}),(0,N.jsx)(s.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,N.jsx)(f.A,{children:(0,N.jsx)(D.A,{user:l,bgcolor:"none",showTitle:!1})})]})}))};var J=n(95382),R=n(71525),V=n(56743),H=n(65499),O=n(688),Q=n(65072),q=n(21430),G=n(50135),X=n(67597);const Y=e=>{let{postId:l,setSelectedId:n}=e;if(!l)return;const{data:t,isLoading:o}=(0,k.A)(l);return o?(0,N.jsx)(w.A,{}):(0,N.jsxs)(g.A,{open:Boolean(l),onClose:()=>{n(null)},fullWidth:!0,maxWidth:"lg",fullScreen:M.Fr,children:[(0,N.jsxs)(x.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n",(0,N.jsx)(A.A,{"aria-label":"close",onClick:()=>n(null),sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,N.jsx)(L.A,{})})]}),(0,N.jsx)(s.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,N.jsx)(f.A,{children:(0,N.jsxs)(i.A,{sx:{paddingY:2},children:[(0,N.jsx)(O.A,{data:t}),(0,N.jsx)(Q.A,{}),(0,N.jsx)(q.A,{sx:{mt:2},company:null===t||void 0===t?void 0:t.employer})]})})]})},K=[{field:"name",headerName:"T\xean h\u1ed3 s\u01a1",minWidth:M.Fr?110:220,renderCell:e=>{const{employee_Profile:l}=null===e||void 0===e?void 0:e.row,{application:n}=l;return(0,N.jsxs)(t.Ay,{container:!0,alignItems:"center",children:[(0,N.jsx)(t.Ay,{item:!0,xs:10.5,sm:12,children:(0,N.jsx)(H.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{B({profile:l})},children:n.name})}),(0,N.jsx)(t.Ay,{item:!0,xs:1.5,sm:0,sx:{display:{sm:"none",xs:"inline"}},children:(0,N.jsx)(j.A,{title:"Chi ti\u1ebft",children:(0,N.jsx)(A.A,{size:"small",onClick:()=>{const e=(0,z.SE)(n.matchingScore),l={"T\xean h\u1ed3 s\u01a1":n.name,"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n":n.jobTitle,"Lo\u1ea1i h\u1ed3 s\u01a1":n.applicationType,"Tr\u1ea1ng th\xe1i":n.status,"\u0110\u1ed9 ph\xf9 h\u1ee3p":(0,N.jsx)(y.A,{value:e,max:3,size:"small",readOnly:!0,sx:{position:"relative",bottom:-5}})};(0,G.A)(l)},children:(0,N.jsx)(X.A,{fontSize:"small"})})})})]})},sortable:!0},{field:"jobTitle",headerName:"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n",minWidth:400,renderCell:e=>{const{employee_Profile:{application:l}}=null===e||void 0===e?void 0:e.row,[n,i]=(0,F.useState)(null);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(H.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{var l;i(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.postId)},children:l.jobTitle}),(0,N.jsx)(Y,{postId:n,setSelectedId:i})]})},sortable:!0},{field:"applicationType",headerName:"Lo\u1ea1i h\u1ed3 s\u01a1",minWidth:150,headerAlign:"center",align:"center",renderCell:e=>{var l,n,i;return null===e||void 0===e||null===(l=e.row)||void 0===l||null===(n=l.employee_Profile)||void 0===n||null===(i=n.application)||void 0===i?void 0:i.applicationType}},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",minWidth:M.Fr?120:180,renderCell:e=>{var l;const{employee_Profile:{application:n}}=null===e||void 0===e?void 0:e.row,{onSaveApplicationStatus:i}=_(),[t,o]=(0,F.useState)(null);(0,F.useEffect)((()=>{var e;if(!n.status||!P.J2)return;const l=null===(e=P.J2.find((e=>e.label===n.status)))||void 0===e?void 0:e.value;o(l)}),[n.status]);return(0,N.jsx)(T.A,{value:t,options:P.J2,onChange:e=>{i([n.id,{status:e.target.value}]).then((()=>{o(e.target.value)}))},sx:{color:null===(l=P.J2.find((e=>e.value===t)))||void 0===l?void 0:l.optionColor,fontSize:M.Fr&&"10px"}})},sortable:!0,headerAlign:"center",align:"center"},{field:"matchingScore",headerName:"\u0110\u1ed9 ph\xf9 h\u1ee3p",minWidth:140,align:"center",headerAlign:"center",renderCell:e=>{const{employee_Profile:{application:l}}=null===e||void 0===e?void 0:e.row,n=(0,z.SE)(l.matchingScore);return void 0===l.matchingScore||null===l.matchingScore?(0,N.jsx)(S.A,{sx:{color:"text.disabled",fontStyle:"italic"},children:"Ch\u01b0a ph\xe2n t\xedch"}):(0,N.jsx)(y.A,{value:n,max:3,readOnly:!0})},sortable:!0}];function U(e){var l;const{pageSize:n,data:i,currentPage:o,totalPages:a,handlePageChange:s,loading:r}=e,[d,c]=(0,F.useState)([]),[u,h]=(0,F.useState)(!1),[p,g]=(0,F.useState)([]),[x,A]=(0,F.useState)(!1),[f,y]=(0,F.useState)(!1),[j,w]=(0,F.useState)(!1),[k,W]=(0,F.useState)([]),[L,D]=(0,F.useState)(!1),[E,B]=(0,F.useState)({signal:!1,resultData:null}),[H,O]=(0,F.useState)([]),[Q,q]=(0,F.useState)(null),{onSaveApplicationStatus:G}=_();console.log(r);const X=()=>{D(!1),A(!1),y(!1),w(!1),h(!1),W([]),B({signal:!1,resultData:null}),console.log("Finished All")},Y=async e=>{c(e)},U=e=>{h(e)},Z=(e,l)=>{B({signal:e,resultData:l})},$=async e=>{const l=await(0,z.d8)(e),n=ee(l);le(n)},ee=e=>d.map((l=>{var n;const i=(0,z.AQ)(l,e,x);return console.log("matchingScore",i),{...l,employee_Profile:{...null===l||void 0===l?void 0:l.employee_Profile,application:{...null===l||void 0===l||null===(n=l.employee_Profile)||void 0===n?void 0:n.application,matchingScore:i}}}})),le=e=>{if(!x){const l=e.filter((e=>{var l;return(null===e||void 0===e||null===(l=e.employee_Profile.application)||void 0===l?void 0:l.matchingScore)>=z.ay}));W(l)}console.log("updatedAnalyzedProfile,",e),c(e),g((l=>l.map((l=>e.find((e=>(null===e||void 0===e?void 0:e.id)===(null===l||void 0===l?void 0:l.id)))||l)))),L&&(x?f?j||w(!0):y(!0):A(!0))},ne=e=>{const l=d.filter((e=>H.includes(e.id))).map(ie);c(l),(0,z.NQ)({round:e,handleAnalyzeResult:$,setIsAnalyzing:U,resetMatchingScoreList:l,setAnalyzedProfile:Y,handleGoToAnalyzeResult:Z,passRoundProfiles:1!==e?k:void 0})},ie=e=>({...e,employee_Profile:{...e.employee_Profile,application:{...e.employee_Profile.application,matchingScore:null}}}),te=()=>{Promise.all(p.filter((e=>H.includes(e.id))).map((e=>{var l,n;return G([e.id,{matchingScore:null===e||void 0===e||null===(l=e.employee_Profile)||void 0===l||null===(n=l.application)||void 0===n?void 0:n.matchingScore}])}))).then(X)},oe=()=>{Promise.all(H.map((e=>G([e,{status:Q}]))))};return(0,F.useEffect)((()=>{E.signal&&$(E.resultData)}),[E.signal]),(0,F.useEffect)((()=>{g(i),c(i)}),[i]),(0,F.useEffect)((()=>{L&&(x?!f&&k.length>0?ne(2):j?te():ne(3):ne(1))}),[L,x,f,j]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.A,{sx:{display:"block",float:{md:"right"},minWidth:{md:500},maxWidth:500},children:(0,N.jsxs)(t.Ay,{container:!0,sx:{alignItems:"center"},spacing:1,children:[(0,N.jsx)(t.Ay,{item:!0,md:3,xs:12,children:(0,N.jsxs)(S.A,{fontWeight:700,textAlign:"center",sx:{mt:{xs:2,md:0}},children:["\u0110\xe3 ch\u1ecdn: ",H.length]})}),(0,N.jsxs)(t.Ay,{item:!0,md:5,xs:12,display:"flex",children:[(0,N.jsx)(T.A,{options:P.J2,onChange:e=>{q(e.target.value)},value:H.length>0?Q:"",sx:{color:null===(l=P.J2.find((e=>e.value===Q)))||void 0===l?void 0:l.optionColor},disabled:!H.length,label:"Duy\u1ec7t nhanh"}),(0,N.jsx)(b.A,{variant:"contained",size:"small",color:"info",sx:{py:1,px:0},onClick:()=>{(0,R.A)({handleConfirm:oe,message:"Chuy\u1ec3n c\xe1c h\u1ed3 s\u01a1 \u0111\xe3 ch\u1ecdn sang tr\u1ea1ng th\xe1i ".concat(V.q0[Q],"?")})},disabled:!H.length||!Q,children:(0,N.jsx)(J.A,{sx:{fontSize:15}})})]}),(0,N.jsx)(t.Ay,{item:!0,container:!0,md:4,xs:12,sx:{display:"flex",alignItems:"center"},children:(0,N.jsxs)(b.A,{onClick:()=>D(H.length>0),variant:"contained",size:"small",disabled:L||!H.length,fullWidth:!0,sx:{py:1,px:0},children:[(0,N.jsx)(t.Ay,{item:!0,xs:u?9:12,children:H.length?L?"\u0110ang ph\xe2n t\xedch":"Ph\xe2n t\xedch nhanh":"Ch\u01b0a ch\u1ecdn h\u1ed3 s\u01a1"}),(0,N.jsx)(t.Ay,{item:!0,xs:u?3:0,children:u&&(0,N.jsx)(C.A,{size:18,color:"secondary"})})]})})]})}),(0,N.jsx)(v.A,{rows:p,columns:K,initialState:{pagination:{paginationModel:{pageSize:n}},columns:{columnVisibilityModel:{jobTitle:!M.Fr,applicationType:!M.Fr,matchingScore:!M.Fr}}},hideFooter:!0,sx:{minHeight:"74vh",width:"100%"},checkboxSelection:!0,disableRowSelectionOnClick:M.Fr,rowSelection:!0,onRowSelectionModelChange:e=>{O(e)},loading:r}),(0,N.jsx)(I.A,{currentPage:o,totalPages:a,handlePageChange:s,disabled:L||r})]})}var Z=n(67902);const $=[{label:"T\u1ea5t c\u1ea3",value:""},{label:"\u0110\xe3 duy\u1ec7t",value:"\u0110\xe3 duy\u1ec7t"},{label:"Ch\u1edd duy\u1ec7t",value:"Ch\u1edd duy\u1ec7t"},{label:"T\u1eeb ch\u1ed1i",value:"T\u1eeb ch\u1ed1i"},{label:"H\u1ebft h\u1ea1n",value:"H\u1ebft h\u1ea1n"}],ee=()=>{const[e,l]=(0,F.useState)(""),[n,c]=(0,F.useState)(1),{data:u,isLoading:h,totalPages:m}=p({page:n,num:9,status:e}),v=(0,F.useMemo)((()=>[...new Set(null===u||void 0===u?void 0:u.map((e=>null===e||void 0===e?void 0:e.postId)))]),[u]),{jobs:g,isLoading:x}=(0,k.B)(v),A=(0,F.useMemo)((()=>(console.log("..."),((e,l)=>null===l||void 0===l?void 0:l.map((l=>{const n=null===e||void 0===e?void 0:e.find((e=>(null===e||void 0===e?void 0:e.postId)===(null===l||void 0===l?void 0:l.postId)));if(!n)return null;const{application_id:i,name:t,email:o,phone:a,applicationType:s,status:r,matchingScore:d,employee:c,CV:u,id:h}=l,{postId:p,jobTitle:m}=n,v=(0,z.z0)(l);return{id:i,employer_Requirement:(0,z.MO)(n),employee_Profile:{online_profile:null===c||void 0===c?void 0:c.online_profile,attached_document:null===c||void 0===c?void 0:c.attached_document,personal_information:{...null===c||void 0===c?void 0:c.user,name:t,email:o,phone:a},application:{id:h,application_id:i,postId:p,CV:u,applicationType:s,jobTitle:m,keywords:v,name:t,status:r,matchingScore:d}}}})).filter(Boolean))(g,u))),[u,g]);return(0,N.jsx)(i.A,{maxWidth:"xl",children:(0,N.jsx)(t.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,marginTop:0,children:(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsxs)(o.A,{children:[(0,N.jsx)(a.A,{title:"Danh S\xe1ch \u1ee9ng vi\xean"}),(0,N.jsx)(s.A,{}),(0,N.jsxs)(r.A,{children:[(0,N.jsx)(Z.A,{onChange:(e,n)=>{c(1),l(n)},value:e,variant:"scrollable",scrollButtons:!1,sx:{display:{md:"inline-block"},borderBottom:1,borderColor:"divider"},children:$.map((e=>(0,N.jsx)(d.A,{label:e.label,value:e.value},e.value)))}),(0,N.jsx)(U,{data:A,pageSize:9,currentPage:n,totalPages:m,handlePageChange:c,loading:h||x})]})]})})})})}},95382:(e,l,n)=>{var i=n(32392);l.A=void 0;var t=i(n(40039)),o=n(70579),a=(0,t.default)((0,o.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");l.A=a}}]);
//# sourceMappingURL=313.f3ab1b61.chunk.js.map