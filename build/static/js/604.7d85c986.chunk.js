"use strict";(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[604],{29773:(e,n,i)=>{i.d(n,{A:()=>a});var l=i(34535),t=(i(65043),i(51318)),o=i(70579);const s=(0,l.Ay)(t.N_)((e=>{let{theme:n}=e;return{textDecoration:"none",color:n.colors.info.dark,"&:active":{color:n.colors.primary.light},"&:visited":{color:n.colors.info.dark}}})),a=e=>(0,o.jsx)(s,{...e})},93604:(e,n,i)=>{i.r(n),i.d(n,{default:()=>ie});var l=i(19252),t=i(68903),o=i(12110),s=i(19464),a=i(79958),d=i(11906),r=i(39336),u=i(26494),c=i(29773),v=i(28800),h=i(85865),m=i(81637),g=i(17392),x=i(77739),p=i(59162),f=i(49768),A=i(65043),y=i(82907),j=i(36110),b=i(53679);const C=()=>{const e=(0,y.useQueryClient)(),{toast:n}=(0,j.n)(),{isLoading:i,mutateAsync:l}=(0,y.useMutation)((e=>{let[n,i]=e;return b.G1.update(n,i)}),{onSuccess:i=>{200===i.status?(e.invalidateQueries(["get-AllJobsByAdmin"]),n.success({massage:i.message})):n.error({massage:i.message})},onError:e=>{n.error({massage:e.response.data.message})}});return{mutate:l,isLoading:i}};var w=i(56743),k=i(25567);const S=e=>{var n,i,l,t,o,s,a,d,r,u,c,v;const{isAdmin:h}=(0,j.n)(),{data:m,isLoading:g,refetch:x}=(0,y.useQuery)(["get-AllJobsByAdmin",null===e||void 0===e?void 0:e.page,null===e||void 0===e?void 0:e.profession,null===e||void 0===e?void 0:e.status],(()=>{for(const n in e)"T\u1ea5t c\u1ea3"===e[n]&&(e[n]="");return b.G1.get({params:e})}),{keepPreviousData:!0,retry:1,refetchOnWindowFocus:!1,enabled:h});return{jobs:(null===m||void 0===m||null===(n=m.data)||void 0===n||null===(i=n.items)||void 0===i?void 0:i.map((e=>({...e,id:e.postId}))))||[],totalItems:null===m||void 0===m||null===(l=m.data)||void 0===l||null===(t=l.meta)||void 0===t?void 0:t.totalItems,itemCount:null===m||void 0===m||null===(o=m.data)||void 0===o||null===(s=o.meta)||void 0===s?void 0:s.itemCount,itemPerPage:null===m||void 0===m||null===(a=m.data)||void 0===a||null===(d=a.meta)||void 0===d?void 0:d.itemPerPage,totalPages:null===m||void 0===m||null===(r=m.data)||void 0===r||null===(u=r.meta)||void 0===u?void 0:u.totalPages,currentPage:null===m||void 0===m||null===(c=m.data)||void 0===c||null===(v=c.meta)||void 0===v?void 0:v.currentPage,isLoading:g,refetch:x}};var F=i(60446),I=i.n(F),W=i(4020),N=i(19217),P=i(54367),L=i(71525),T=i(95382),D=i(65499),z=i(67597),J=i(50135),O=i(14015),q=i(12197),M=i(83462),Y=i(26600),E=i(35316),H=i(688),B=i(65072),R=i(21430),Q=i(74802),V=i(70579);function G(e){let{data:n,postId:i,setSelectedId:t}=e;return(0,V.jsxs)(M.A,{open:Boolean(i),onClose:()=>{t(null)},fullWidth:!0,maxWidth:"lg",fullScreen:O.Fr,children:[(0,V.jsxs)(Y.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["Vi\u1ec7c l\xe0m \u1ee9ng tuy\u1ec3n",(0,V.jsx)(g.A,{"aria-label":"close",onClick:()=>t(null),sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,V.jsx)(Q.A,{})})]}),(0,V.jsx)(r.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,V.jsx)(E.A,{children:(0,V.jsxs)(l.A,{sx:{paddingY:2},children:[(0,V.jsx)(H.A,{data:n}),(0,V.jsx)(B.A,{}),(0,V.jsx)(R.A,{sx:{mt:2},company:null===n||void 0===n?void 0:n.employer})]})})]})}var K=i(89138);const _=[{label:"Ch\u01b0a x\xe1c \u0111\u1ecbnh",value:null,color:"#fff"},{label:"H\u1ee3p quy \u0111\u1ecbnh",value:!1,color:"#BFD8AF"},{label:"Vi ph\u1ea1m",value:!0,color:"#F94C10"}],U=[{field:"jobTitle",headerName:"Tin tuy\u1ec3n d\u1ee5ng",minWidth:O.Fr?130:200,renderCell:e=>{var n;const[i,l]=(0,A.useState)(null),{itemDetail:o,setItemDetail:s}=(0,K.A)();console.log(e);(0,P.O)(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.jobTitle);return(0,V.jsxs)(t.Ay,{container:!0,alignItems:"center",children:[(0,V.jsx)(t.Ay,{item:!0,xs:10.5,sm:12,children:(0,V.jsx)(D.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{l(e.id),s(null===e||void 0===e?void 0:e.row)},children:e.value})}),(0,V.jsx)(t.Ay,{item:!0,xs:1.5,sm:0,sx:{display:{sm:"none",xs:"inline"}},children:(0,V.jsx)(x.A,{title:"Chi ti\u1ebft",children:(0,V.jsx)(g.A,{size:"small",onClick:()=>{var n,i,l,t,o,s,a,d,r;const u={"T\xean tin tuy\u1ec3n d\u1ee5ng":null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.jobTitle,"Ng\u01b0\u1eddi \u0111\u0103ng":null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.name,"T\xean c\xf4ng ty":null===e||void 0===e||null===(l=e.row)||void 0===l||null===(t=l.employer)||void 0===t?void 0:t.companyName,"Ng\xe0y \u0111\u0103ng":I()(null===(o=e.row)||void 0===o?void 0:o.createAt).add(7,"hours").format("DD-MM-YYYY HH:mm:ss"),"L\u01b0\u1ee3t n\u1ed9p":null===(s=e.row)||void 0===s?void 0:s.submissionCount,"L\u01b0\u1ee3t xem":null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.view,"Tr\u1ea1ng th\xe1i":null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.status,"Ki\u1ec3m duy\u1ec7t":null===(r=_.find((n=>{var i;return n.value==(null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.check)})))||void 0===r?void 0:r.label};(0,J.A)(u)},children:(0,V.jsx)(z.A,{fontSize:"small"})})})}),(0,V.jsx)(G,{postId:i,setSelectedId:l,data:null===e||void 0===e?void 0:e.row})]})}},{field:"name",headerName:"Ng\u01b0\u1eddi \u0111\u0103ng",minWidth:120,resizable:!0,renderCell:e=>(0,V.jsx)(s.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"wrap",lineHeight:"1.5",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.value})},{field:"employer",headerName:"T\xean c\xf4ng ty",minWidth:200,renderCell:e=>{var n,i,l,o;return(0,V.jsx)(t.Ay,{container:!0,alignItems:"center",children:(0,V.jsx)(t.Ay,{item:!0,xs:12,component:D.L,children:(0,V.jsx)(c.A,{to:"/company/".concat((0,P.O)(null===(n=e.value)||void 0===n?void 0:n.companyName),"?id=").concat(btoa(null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.userId)),state:{id:null===e||void 0===e||null===(l=e.value)||void 0===l?void 0:l.userId},children:null===(o=e.value)||void 0===o?void 0:o.companyName})})})}},{field:"createAt",headerName:"Ng\xe0y \u0111\u0103ng",minWidth:110,sortable:!0,renderCell:e=>(0,V.jsx)(s.A,{sx:{whiteSpace:"wrap",lineHeight:"1.5em"},children:I()(e.value).add(7,"hours").format("DD-MM-YYYY HH:mm:ss")})},{field:"submissionCount",headerName:"L\u01b0\u1ee3t n\u1ed9p",minWidth:90,align:"center",headerAlign:"center",sortable:!0},{field:"view",headerName:"L\u01b0\u1ee3t xem",minWidth:90,align:"center",headerAlign:"center",sortable:!0,resizable:!0},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",minWidth:O.Fr?115:130,headerAlign:"center",renderCell:e=>{const n=p.J2.find((n=>n.label===e.value)).value,{mutate:i}=C();return(0,V.jsx)(f.A,{value:n,options:p.J2,onChange:n=>{const l=n.target.value;1==(null===e||void 0===e?void 0:e.row.check)&&l===Object.keys(w.q0)[0]?(0,L.A)({selectedId:e.id,handleConfirm:()=>{return l=e.id,t=n.target.value,void i([l,{status:t,check:!1}]);var l,t},message:"Tin tuy\u1ec3n d\u1ee5ng \u0111ang \u1edf tr\u1ea1ng th\xe1i vi ph\u1ea1m, b\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n duy\u1ec7t tin tuy\u1ec3n d\u1ee5ng n\xe0y kh\xf4ng?"}):i([e.id,{status:l}])},size:"small",sx:{fontSize:O.Fr?10:13,color:(()=>{var n;return null===(n=p.J2.find((n=>n.label===e.value)))||void 0===n?void 0:n.optionColor})()}})},sortable:!0},{field:"check",headerName:"Ki\u1ec3m duy\u1ec7t",minWidth:130,headerAlign:"center",align:"center",renderCell:e=>{const{mutate:n}=C(),i=_.find((n=>n.value==e.value)),[l,t]=(0,A.useState)(i);_.map((e=>({label:e.label,value:e.value?"true":0==e.value?"false":"null"})));return(0,A.useEffect)((()=>{t(i)}),[e.value]),(0,V.jsx)(h.A,{bgcolor:null===i||void 0===i?void 0:i.color,sx:{width:"90%",borderRadius:1,py:1,textAlign:"center",fontSize:13},children:null===i||void 0===i?void 0:i.label})},sortable:!0}];function X(e){var n;let{statusFilter:i,selectedProfession:l}=e;const{mutate:o}=C(),[a,r]=(0,A.useState)(!1),[u,c]=(0,A.useState)([]),[g,x]=(0,A.useState)(1),[y,j]=(0,A.useState)([]),{jobs:b,isLoading:F,totalPages:I}=S({page:g,num:9,status:w.q0[i],profession:l});(0,A.useEffect)((()=>{if(!a)return;(async e=>{const n=await(0,W.A)(N.aG,e),i=null===n||void 0===n?void 0:n.map((e=>(0,q.Jm)(e)&&JSON.parse(e))),l=null===b||void 0===b?void 0:b.map((e=>{const n=i.find((n=>n.id===e.postId));return n?(o([n.id,{check:n.result}]),{...e,check:n.result}):e}));c(l),r(!1)})(b.filter((e=>y.includes(e.postId))).map((e=>(e=>({postId:null===e||void 0===e?void 0:e.postId,jobTitle:null===e||void 0===e?void 0:e.jobTitle,jobDescription:null===e||void 0===e?void 0:e.jobDescription,jobRequirements:null===e||void 0===e?void 0:e.jobRequirements,benefits:null===e||void 0===e?void 0:e.benefits,requiredSkills:null===e||void 0===e?void 0:e.requiredSkills}))(e))))}),[a]),(0,A.useEffect)((()=>{b&&c((()=>b))}),[JSON.stringify(b)]),(0,A.useEffect)((()=>{x(1)}),[i]);const[P,D]=(0,A.useState)(null),z=()=>{const e=()=>{Promise.all(y.map((e=>o([e,{status:P}]))))},n=b.find((e=>y.includes(e.postId)&&1==e.check));y.some((e=>n&&P===Object.keys(w.q0)[0]))?(0,L.A)({handleConfirm:e,message:"C\xf3 tin tuy\u1ec3n d\u1ee5ng \u0111ang \u1edf tr\u1ea1ng th\xe1i vi ph\u1ea1m, b\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n c\xe1c duy\u1ec7t tin tuy\u1ec3n d\u1ee5ng \u0111\xe3 ch\u1ecdn kh\xf4ng?"}):e()};return(0,V.jsxs)(s.A,{children:[(0,V.jsx)(s.A,{sx:{display:"block",float:{md:"right"},minWidth:{md:500},maxWidth:500},children:(0,V.jsxs)(t.Ay,{container:!0,sx:{alignItems:"center"},spacing:1,children:[(0,V.jsx)(t.Ay,{item:!0,md:3,xs:12,children:(0,V.jsxs)(h.A,{fontWeight:700,children:["\u0110\xe3 ch\u1ecdn: ",y.length]})}),(0,V.jsxs)(t.Ay,{item:!0,md:5,xs:12,display:"flex",children:[(0,V.jsx)(f.A,{options:p.J2,onChange:e=>{D(e.target.value)},value:y.length>0?P:"",sx:{color:null===(n=p.J2.find((e=>e.value===P)))||void 0===n?void 0:n.optionColor},disabled:!y.length,label:"Duy\u1ec7t nhanh"}),(0,V.jsx)(d.A,{variant:"contained",size:"small",sx:{py:1,px:0},color:"info",onClick:()=>{(0,L.A)({handleConfirm:z,message:"Chuy\u1ec3n tin tuy\u1ec3n d\u1ee5ng \u0111\xe3 ch\u1ecdn sang tr\u1ea1ng th\xe1i ".concat(w.q0[P].toUpperCase(),"?")})},disabled:!y.length||!P,children:(0,V.jsx)(T.A,{sx:{fontSize:15}})})]}),(0,V.jsx)(t.Ay,{item:!0,container:!0,md:4,xs:12,sx:{display:"flex",alignItems:"center"},children:(0,V.jsxs)(d.A,{onClick:()=>r(y.length>0),variant:"contained",size:"small",disabled:a||!y.length,fullWidth:!0,sx:{py:1,px:0,bgcolor:"#FC4100"},children:[(0,V.jsx)(t.Ay,{item:!0,xs:a?9:12,children:a?"\u0110ang ki\u1ec3m duy\u1ec7t...":"Ki\u1ec3m duy\u1ec7t"}),(0,V.jsx)(t.Ay,{item:!0,xs:a?3:0,children:a&&(0,V.jsx)(m.A,{size:18,color:"secondary"})})]})})]})}),(0,V.jsx)(v.A,{sx:{minHeight:"72vh",width:"100%"},rows:u,columns:U,hideFooter:!0,checkboxSelection:!0,rowSelection:!0,onRowSelectionModelChange:e=>{j(e)},loading:F,initialState:{columns:{columnVisibilityModel:{name:!O.Fr,employer:!O.Fr,createAt:!O.Fr,submissionCount:!O.Fr,view:!O.Fr,check:!O.Fr}}},disableRowSelectionOnClick:O.Fr}),(0,V.jsx)(k.A,{totalPages:I,currentPage:g,handlePageChange:x,disabled:a})]})}var Z=i(4037),$=i(62237);const ee=e=>{const{data:n,isLoading:i}=(0,y.useQuery)(["get-TotalResultsEachProfessionByAdmin",e],(()=>b.J.get({params:e})),{retry:1,refetchOnWindowFocus:!1});return{dataList:null===n||void 0===n?void 0:n.data,isLoading:i}},ne=[{value:"",label:"T\u1ea5t c\u1ea3",color:"info",optionColor:"#000"},...p.J2],ie=()=>{const[e,n]=(0,A.useState)(""),[i,c]=(0,A.useState)(null),[v,h]=(0,A.useState)(!1),{dataList:m,isLoading:g}=ee();return g?(0,V.jsx)($.A,{}):(0,V.jsx)(l.A,{maxWidth:"xl",children:(0,V.jsx)(t.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,marginTop:0,children:(0,V.jsx)(t.Ay,{item:!0,xs:12,children:(0,V.jsxs)(o.A,{children:[(0,V.jsxs)(s.A,{sx:{display:"flex",justifyContent:{sm:"space-between",xs:"center"},flexWrap:"wrap"},children:[(0,V.jsx)(a.A,{title:"Danh s\xe1ch tin tuy\u1ec3n d\u1ee5ng"}),(0,V.jsxs)(s.A,{sx:{display:"flex",justifyContent:{xs:"center",sm:"end"},px:2,gap:1},children:[!v&&(0,V.jsx)(s.A,{sx:{margin:"auto",width:"120px"},children:(0,V.jsx)(f.A,{label:"Tr\u1ea1ng th\xe1i",value:e,options:ne,onChange:e=>(e=>{n(e.target.value)})(e),sx:{color:ne.find((n=>n.value===e)).optionColor}})}),(0,V.jsx)(d.A,{variant:"contained",color:v?"info":"primary",onClick:()=>{h((e=>!e)),c(null)},sx:{margin:"auto",height:35,width:150},children:v?"T\u1ea5t c\u1ea3":"Xem theo ng\xe0nh"})]})]}),(0,V.jsx)(r.A,{}),(0,V.jsxs)(u.A,{children:[v&&!i&&(0,V.jsx)(Z.A,{handleSelectProfession:e=>{c(e),h(!1)},handleViewProfessionMode:h,total:m}),!v&&(0,V.jsx)(X,{statusFilter:e,selectedProfession:i})]})]})})})})}},95382:(e,n,i)=>{var l=i(32392);n.A=void 0;var t=l(i(40039)),o=i(70579),s=(0,t.default)((0,o.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");n.A=s}}]);
//# sourceMappingURL=604.7d85c986.chunk.js.map