(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[174],{67902:(e,l,i)=>{"use strict";i.d(l,{A:()=>t});var o=i(34535),n=i(69869);const t=(0,o.Ay)(n.A)((()=>"\n    .MuiTabs-scrollableX {\n    overflow-x: auto !important;\n      }\n  "))},52404:(e,l,i)=>{"use strict";i.d(l,{D$:()=>r,DG:()=>t,mi:()=>n,zP:()=>a});var o=i(22626);const n=new o.A("employee/applications"),t=new o.A("employer/applications"),a=new o.A("employer/applications"),r=new o.A("employer/applications/totalResults")},94220:(e,l,i)=>{"use strict";i.d(l,{A:()=>r,L:()=>d});var o=i(82907),n=i(52404),t=i(65043),a=i(36110);function r(e){const{isEmployer:l}=(0,a.n)();if(!e)return{};const{data:i,isLoading:t}=(0,o.useQuery)(["application-getById",e],(async()=>n.DG.getById(e)),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0,enabled:l});return{data:null===i||void 0===i?void 0:i.data,isLoading:t}}function d(e){const[l,i]=(0,t.useState)([]),{data:a,isLoading:r,refetch:d}=(0,o.useQuery)(["application-getByIdList",JSON.stringify(e)],(async()=>{if(!e.length)return[];Promise.allSettled(e.map((e=>n.DG.getById(e)))).then((e=>{const l=e.filter((e=>"fulfilled"===e.status)).map((e=>e.value));i(l)})).catch((e=>console.log(e)))}),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:null===l||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.data)),isLoading:r,refetch:d}}},23703:(e,l,i)=>{"use strict";i.r(l),i.d(l,{default:()=>Q});var o=i(19252),n=i(68903),t=i(12110),a=i(79958),r=i(39336),d=i(26494),s=i(24056),u=i(82907),c=i(52404),v=i(36110);const p=e=>{var l;const{isEmployer:i}=(0,v.n)(),{data:o,isLoading:n,refetch:t,isFetching:a}=(0,u.useQuery)(["application-getList",null===e||void 0===e?void 0:e.page,null===e||void 0===e?void 0:e.status,null===e||void 0===e?void 0:e.matchingScore],(()=>c.DG.get({params:e})),{keepPreviousData:!0,retry:1,refetchOnWindowFocus:!1,enabled:i});return{data:(null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.map((e=>({...e,id:e.application_id}))))||[],isLoading:n,refetch:t,isFetching:a}};var m=i(19464),h=i(28800),f=i(85865),g=i(11906),y=i(81637),x=i(59162);const _=()=>{const e=(0,u.useQueryClient)(),{toast:l}=(0,v.n)(),{isLoading:i,mutateAsync:o}=(0,u.useMutation)((e=>{let[l,i]=e;return c.zP.update(l,i)}),{onSuccess:i=>{200===i.status?(e.invalidateQueries(["application-getList"]),l.success({massage:i.message})):l.error({massage:i.message})},onError:e=>{l.error({massage:e.response.data.message})}});return{onSaveApplicationStatus:o,isLoading:i}};var b=i(65043),A=i(49768),P=i(94220),S=i(42445),j=i(21886),w=i(3553),C=i(84391),k=i(83462),R=i(26600),O=i(17392),T=i(35316),D=i(74802),L=i(19193),I=i(60427),N=i(70579);const z=function(e){let{profile:l}=e;const i=document.createElement("div"),o=(0,C.H)(i);document.body.appendChild(i),o.render((0,N.jsx)(I.A,{children:(0,N.jsxs)(k.A,{open:!0,fullWidth:!0,maxWidth:"md",children:[(0,N.jsxs)(R.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["H\u1ed3 s\u01a1 ng\u01b0\u1eddi d\xf9ng",(0,N.jsx)(O.A,{"aria-label":"close",onClick:()=>{o.unmount()},sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,N.jsx)(D.A,{})})]}),(0,N.jsx)(r.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,N.jsx)(T.A,{children:(0,N.jsx)(L.A,{user:l,bgcolor:"none",showTitle:!1})})]})}))};var q=i(95382),F=i(94006),J=i(56743);const W=[{field:"name",headerName:"T\xean h\u1ed3 s\u01a1",minWidth:220,renderCell:e=>{var l,i,o;const n=null!==e&&void 0!==e&&null!==(l=e.row)&&void 0!==l&&l.CV?null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.CV:"#",{data:t}=((0,b.useMemo)((()=>n||"#"),[n]),(0,P.A)(null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.id));return(0,N.jsx)(f.A,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{z({profile:t})},children:e.value})},sortable:!0},{field:"jobTitle",headerName:"V\u1ecb tr\xed \u1ee9ng tuy\u1ec3n",minWidth:400,renderCell:e=>{if(e.value)return(0,N.jsx)(f.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"wrap",lineHeight:"1.5",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.value})},sortable:!0},{field:"applicationType",headerName:"Lo\u1ea1i h\u1ed3 s\u01a1",minWidth:150,headerAlign:"center",align:"center"},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",minWidth:180,renderCell:e=>{var l;const{onSaveApplicationStatus:i}=_(),[o,n]=(0,b.useState)(null);(0,b.useEffect)((()=>{var l;if(!e.value||!x.J2)return;const i=null===(l=x.J2.find((l=>l.label===e.value)))||void 0===l?void 0:l.value;n(i)}),[e.value]);return(0,N.jsx)(A.A,{value:o,options:x.J2,onChange:l=>{i([e.id,{status:l.target.value}]).then((()=>{n(l.target.value)}))},sx:{color:null===(l=x.J2.find((e=>e.value===o)))||void 0===l?void 0:l.optionColor}})},sortable:!0,headerAlign:"center",align:"center"},{field:"matchingScore",headerName:"\u0110\u1ed9 ph\xf9 h\u1ee3p",minWidth:150,align:"center",headerAlign:"center",renderCell:e=>{let l="";return e.value>=S.IF?l="Cao":e.value>=S.$I&&e.value<S.IF?l="Trung b\xecnh":e.value>=S.ay&&e.value<S.$I?l="Th\u1ea5p":e.value<0&&(l="Kh\xf4ng ph\xf9 h\u1ee3p"),void 0===e.value||null===e.value?(0,N.jsx)(f.A,{sx:{color:"text.disabled",fontStyle:"italic"},children:"Ch\u01b0a x\xe1c \u0111\u1ecbnh"}):(0,N.jsx)(m.A,{sx:{width:"90%",borderRadius:2,p:1,bgcolor:e.value>=S.IF?"#ffc107":e.value>=S.$I?"#A1C398":e.value>=S.ay?"#b5b5b5":"#efefef",display:"flex",justifyContent:"center",alignItems:"center"},children:l})},sortable:!0}];function M(e){var l;const{pageSize:i,data:o,currentPage:t,totalPages:a,handlePageChange:r}=e,[d,s]=(0,b.useState)([]),[u,c]=(0,b.useState)(!1),[v,p]=(0,b.useState)([]),[C,k]=(0,b.useState)(!1),[R,O]=(0,b.useState)(!1),[T,D]=(0,b.useState)(!1),[L,I]=(0,b.useState)([]),[z,M]=(0,b.useState)(!1),[E,V]=(0,b.useState)({signal:!1,resultData:null}),[Y,B]=(0,b.useState)([]),[Q,G]=(0,b.useState)(!0),H=null===o||void 0===o?void 0:o.map((e=>null===e||void 0===e?void 0:e.application_id)),$=[...new Set(null===o||void 0===o?void 0:o.map((e=>{var l;return null===e||void 0===e||null===(l=e.jobPosting)||void 0===l?void 0:l.postId})))],{jobs:K,isLoading:X}=(0,j.B)($),{data:Z,isLoading:U,refetch:ee}=(0,P.L)(H),{onSaveApplicationStatus:le}=_(),ie=async e=>{s(e)},oe=e=>{c(e)},ne=(e,l)=>{V({signal:e,resultData:l})},te=async e=>{const l=await(0,S.d8)(e),i=ae(l);de(i)},ae=e=>d.map((l=>{var i;const o=re(l,e);return console.log("matchingScore",o),{...l,employee_Profile:{...null===l||void 0===l?void 0:l.employee_Profile,application:{...null===l||void 0===l||null===(i=l.employee_Profile)||void 0===i?void 0:i.application,matchingScore:o}}}})),re=(e,l)=>{var i,o;const n=l.find((l=>(null===l||void 0===l?void 0:l.id)===(null===e||void 0===e?void 0:e.id)));var t,a,r,d,s,u;return void 0!==(null===n||void 0===n?void 0:n.result)?void 0!==(null===e||void 0===e||null===(t=e.employee_Profile)||void 0===t||null===(a=t.application)||void 0===a?void 0:a.matchingScore)?(null===e||void 0===e||null===(r=e.employee_Profile)||void 0===r||null===(d=r.application)||void 0===d?void 0:d.matchingScore)+n.result:n.result:!C&&(null!==e&&void 0!==e&&null!==(i=e.employee_Profile)&&void 0!==i&&i.online_profile||null!==e&&void 0!==e&&null!==(o=e.employee_Profile)&&void 0!==o&&o.attached_document)?(0,S._h)(null===e||void 0===e?void 0:e.employer_Requirement,null===e||void 0===e?void 0:e.employee_Profile):null===e||void 0===e||null===(s=e.employee_Profile)||void 0===s||null===(u=s.application)||void 0===u?void 0:u.matchingScore},de=e=>{if(!C){const l=e.filter((e=>{var l;return(null===e||void 0===e||null===(l=e.employee_Profile.application)||void 0===l?void 0:l.matchingScore)>=S.ay}));I(l)}s(e);const l=e.map((e=>{var l;return{...null===e||void 0===e||null===(l=e.employee_Profile)||void 0===l?void 0:l.application,id:e.id}}));p((e=>e.map((e=>l.find((l=>(null===l||void 0===l?void 0:l.id)===(null===e||void 0===e?void 0:e.id)))||e)))),z&&(C?R?T||D(!0):O(!0):k(!0))},se=()=>null===o||void 0===o?void 0:o.map((e=>{var l,i,o;const n=null===K||void 0===K?void 0:K.find((l=>{var i;return(null===l||void 0===l?void 0:l.postId)===(null===e||void 0===e||null===(i=e.jobPosting)||void 0===i?void 0:i.postId)})),t=null===Z||void 0===Z?void 0:Z.find((l=>{var i;return(null===l||void 0===l||null===(i=l.application)||void 0===i?void 0:i.application_id)===(null===e||void 0===e?void 0:e.application_id)}));if(!n||!t)return null;const a=(0,S.MO)(n),r=(0,S.kF)(t);return{id:null===e||void 0===e?void 0:e.application_id,employer_Requirement:a,employee_Profile:{...r,application:{...r.application,jobTitle:null===n||void 0===n?void 0:n.jobTitle,keywords:null!==r&&void 0!==r&&null!==(l=r.application)&&void 0!==l&&l.keywords?null===r||void 0===r||null===(i=r.application)||void 0===i?void 0:i.keywords:null!==r&&void 0!==r&&r.online_profile?null===t||void 0===t?void 0:t.online_profile.keywords:null===r||void 0===r||null===(o=r.attached_document)||void 0===o?void 0:o.keywords}}}})).filter(Boolean),ue=()=>{if(C)!R&&L.length>0?(0,S.NQ)({round:2,handleAnalyzeResult:te,setIsAnalyzing:oe,passRoundProfiles:L}):T?(Promise.all(v.filter((e=>Y.includes(e.id))).map((e=>le([e.id,{matchingScore:e.matchingScore}])))).then((()=>{ee()})),M(!1),k(!1),O(!1),D(!1),c(!1),I([]),V({signal:!1,resultData:null}),s(se()),console.log("Finished All")):(0,S.NQ)({round:3,handleAnalyzeResult:te,setIsAnalyzing:oe,passRoundProfiles:L});else{const e=d.filter((e=>Y.includes(e.id))).map((e=>({...e,employee_Profile:{...e.employee_Profile,application:{...e.employee_Profile.application,matchingScore:null}}})));s(e),(0,S.NQ)({round:1,handleAnalyzeResult:te,setIsAnalyzing:oe,resetMatchingScoreList:e,setAnalyzedProfile:ie,handleGoToAnalyzeResult:ne})}},ce=()=>{Promise.all(Y.map((e=>le([e,{status:ve}])))).then((()=>{ee()}))};(0,b.useEffect)((()=>{E.signal&&te(E.resultData)}),[E.signal]),(0,b.useEffect)((()=>{if(G(!0),console.log(111),!K.length||!Z.length||z)return;const e=se(),l=null===e||void 0===e?void 0:e.map((e=>(e.employee_Profile.application.id=e.id,e.employee_Profile.application)));JSON.stringify(l)!==JSON.stringify(v)&&(console.log("showList",l),p((()=>l))),JSON.stringify(e)!==JSON.stringify(d)&&s(e),G(!1)}),[JSON.stringify(o),JSON.stringify(K),JSON.stringify(Z)]),(0,b.useEffect)((()=>{z&&ue()}),[z,C,R,T]);const[ve,pe]=(0,b.useState)(null);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.A,{sx:{display:"block",float:{md:"right"},minWidth:{md:500},maxWidth:500},children:(0,N.jsxs)(n.Ay,{container:!0,sx:{alignItems:"center"},spacing:1,children:[(0,N.jsx)(n.Ay,{item:!0,md:3,xs:12,children:(0,N.jsxs)(f.A,{fontWeight:700,textAlign:"center",sx:{mt:{xs:2,md:0}},children:["\u0110\xe3 ch\u1ecdn: ",Y.length]})}),(0,N.jsxs)(n.Ay,{item:!0,md:5,xs:12,display:"flex",children:[(0,N.jsx)(A.A,{options:x.J2,onChange:e=>{pe(e.target.value)},value:Y.length>0?ve:"",sx:{color:null===(l=x.J2.find((e=>e.value===ve)))||void 0===l?void 0:l.optionColor},disabled:!Y.length,label:"Duy\u1ec7t nhanh"}),(0,N.jsx)(g.A,{variant:"contained",size:"small",color:"info",sx:{py:1,px:0},onClick:()=>{(0,F.A)({selectedId:"_",handleConfirm:ce,message:"Chuy\u1ec3n c\xe1c h\u1ed3 s\u01a1 \u0111\xe3 ch\u1ecdn sang tr\u1ea1ng th\xe1i ".concat(J.q0[ve],"?")})},disabled:!Y.length||!ve,children:(0,N.jsx)(q.A,{sx:{fontSize:15}})})]}),(0,N.jsx)(n.Ay,{item:!0,container:!0,md:4,xs:12,sx:{display:"flex",alignItems:"center"},children:(0,N.jsxs)(g.A,{onClick:()=>M(Y.length>0),variant:"contained",size:"small",disabled:z||!Y.length,fullWidth:!0,sx:{py:1,px:0},children:[(0,N.jsx)(n.Ay,{item:!0,xs:u?9:12,children:Y.length?z?"\u0110ang ph\xe2n t\xedch":"Ph\xe2n t\xedch nhanh":"Ch\u01b0a ch\u1ecdn h\u1ed3 s\u01a1"}),(0,N.jsx)(n.Ay,{item:!0,xs:u?3:0,children:u&&(0,N.jsx)(y.A,{size:18,color:"secondary"})})]})})]})}),(0,N.jsx)(h.A,{rows:v,columns:W,initialState:{pagination:{paginationModel:{pageSize:i}}},hideFooter:!0,sx:{height:"74vh",width:"100%"},checkboxSelection:!0,rowSelection:!0,onRowSelectionModelChange:e=>{B(e)},loading:U||X||Q}),(0,N.jsx)(w.A,{currentPage:t,totalPages:a,handlePageChange:r,disabled:z})]})}var E=i(62237);const V=e=>{var l;const{isEmployer:i}=(0,v.n)(),{data:o,isLoading:n}=(0,u.useQuery)(["application-getList",null===e||void 0===e?void 0:e.page,null===e||void 0===e?void 0:e.status],(()=>c.D$.get({params:e})),{retry:1,refetchOnWindowFocus:!1,keepPreviousData:!0,enabled:i});return{totalResults:null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.totalResults,isLoading:n}};var Y=i(67902);const B=[{label:"T\u1ea5t c\u1ea3",value:""},{label:"\u0110\xe3 duy\u1ec7t",value:"\u0110\xe3 duy\u1ec7t"},{label:"Ch\u1edd duy\u1ec7t",value:"Ch\u1edd duy\u1ec7t"},{label:"T\u1eeb ch\u1ed1i",value:"T\u1eeb ch\u1ed1i"},{label:"H\u1ebft h\u1ea1n",value:"H\u1ebft h\u1ea1n"}],Q=()=>{const[e,l]=(0,b.useState)({currentPage:1,currentTab:""}),{data:i,isLoading:u}=p({page:e.currentPage,num:9,status:e.currentTab}),{totalResults:c,isLoading:v}=V({status:e.currentTab}),m=Math.ceil(c/9)||1;return console.log("rerender 1"),u||v?(0,N.jsx)(E.A,{}):(0,N.jsx)(o.A,{maxWidth:"xl",children:(0,N.jsx)(n.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,marginTop:0,children:(0,N.jsx)(n.Ay,{item:!0,xs:12,children:(0,N.jsxs)(t.A,{children:[(0,N.jsx)(a.A,{title:"Danh S\xe1ch \u1ee9ng vi\xean"}),(0,N.jsx)(r.A,{}),(0,N.jsxs)(d.A,{children:[(0,N.jsx)(Y.A,{onChange:(e,i)=>{l((()=>({currentPage:1,currentTab:i})))},value:e.currentTab,variant:"scrollable",scrollButtons:!1,sx:{display:{md:"inline-block"},borderBottom:1,borderColor:"divider"},children:B.map((e=>(0,N.jsx)(s.A,{label:e.label,value:e.value},e.value)))}),(0,N.jsx)(M,{data:i,pageSize:9,currentPage:e.currentPage,totalPages:m,handlePageChange:e=>{l((l=>({...l,currentPage:e})))}})]})]})})})})}},42445:(e,l,i)=>{"use strict";i.d(l,{IF:()=>h,ay:()=>p,$I:()=>m,_h:()=>b,d8:()=>C,MO:()=>x,kF:()=>_,NQ:()=>w});var o=i(785),n=i(25650),t=i(38484),a=i(69570),r=i(60386),d=i(56743);var s=i(60446),u=i.n(s),c=i(95796),v=i(78910);const p=30,m=80,h=110,f=async(e,l)=>Promise.all(e.map((async e=>({...e,employee_Profile:await l(e.employee_Profile)})))),g=e=>e.filter((e=>e.employee_Profile)).map((e=>{let{employee_Profile:l,employer_Requirement:i}=e;return{employee_Profile:l,employer_Requirement:i}})),y=e=>{if(!e)return null;const l=e.replace(/[^\w\s,+()@.:\/-]/g,"").replace(/\s+/g," ");return l||null},x=e=>({id:null===e||void 0===e?void 0:e.postId,jobTitle:null===e||void 0===e?void 0:e.jobTitle,profession:null===e||void 0===e?void 0:e.profession,jobDescription:(0,n.Cu)(null===e||void 0===e?void 0:e.jobDescription),jobRequirements:(0,n.Cu)(null===e||void 0===e?void 0:e.jobRequirements),benefits:(0,n.Cu)(null===e||void 0===e?void 0:e.benefits),workAddress:null===e||void 0===e?void 0:e.workAddress,minAge:null===e||void 0===e?void 0:e.minAge,maxAge:null===e||void 0===e?void 0:e.maxAge,sex:null===e||void 0===e?void 0:e.sex,requiredSkills:null===e||void 0===e?void 0:e.requiredSkills,employmentType:null===e||void 0===e?void 0:e.employmentType,degree:null===e||void 0===e?void 0:e.degree,experience:null===e||void 0===e?void 0:e.experience,positionLevel:null===e||void 0===e?void 0:e.positionLevel,keywords:null===e||void 0===e?void 0:e.keywords}),_=e=>{var l,i;return{...e,personal_information:{dob:null===e||void 0===e||null===(l=e.personal_information)||void 0===l?void 0:l.dob,sex:null===e||void 0===e||null===(i=e.personal_information)||void 0===i?void 0:i.sex}}},b=(e,l)=>{const{personal_information:i,online_profile:o,attached_document:n}=l,t=u()(null===i||void 0===i?void 0:i.dob,"YYYY-MM-DD").isValid()?u()(null===i||void 0===i?void 0:i.dob,"YYYY-MM-DD"):u()(null===i||void 0===i?void 0:i.dob,"DD-MM-YYYY"),a=u()().year()-t.year();return null!==(null===e||void 0===e?void 0:e.sex)&&(null===e||void 0===e?void 0:e.sex)!==(null===i||void 0===i?void 0:i.sex)||(null===e||void 0===e?void 0:e.minAge)>a||(null===e||void 0===e?void 0:e.maxAge)<a||o&&!A(o,e)||n&&!A(n,e)?-10:30},A=(e,l)=>{const{profession:i,degree:o,experience:n}=e,t=i.split(", "),a=l.profession.split(", ");return!!t.some((e=>a.includes(e)))&&(r=o,s=null===l||void 0===l?void 0:l.degree,!((Object.values(d.Ry).indexOf(r)>Object.values(d.Ry).indexOf(s)?-1:1)<0)&&!(function(e,l){return Object.values(d.Je).indexOf(e)>Object.values(d.Je).indexOf(e)?-1:1}(n,null===l||void 0===l||l.experience)<0));var r,s},P=async(e,l)=>{try{const l=await(0,a.TL)(e),i=await fetch(l);if(!i.ok)throw new Error("Failed to fetch file");const o=await i.blob();return(0,r.A)(o)}catch(i){return console.error("Error fetching data:",i),null}},S=async e=>{if(null!==e&&void 0!==e&&e.attached_document){const l=await P(e.attached_document.CV),i=y(l);return i?{...e,attached_document:{...e.attached_document,CV:i}}:null}return null},j=async e=>{var l,i;if("N\u1ed9p nhanh"===(null===e||void 0===e||null===(l=e.application)||void 0===l?void 0:l.applicationType)&&null!==e&&void 0!==e&&null!==(i=e.application)&&void 0!==i&&i.CV){const l=await P(e.application.CV),i=y(l);return i?{...e,application:{...e.application,CV:i}}:e}return null},w=async e=>{let{round:l,handleAnalyzeResult:i,setIsAnalyzing:n,setAnalyzedProfile:a,passRoundProfiles:r,resetMatchingScoreList:d,handleGoToAnalyzeResult:s}=e;switch(n(!0),l){case 1:await(async(e,l,i,n)=>{console.log("Start round 1");const a=e.filter((e=>{var l;return null===(l=e.employee_Profile.attached_document)||void 0===l?void 0:l.CV})),r=e.filter((e=>{var l;return!(null!==(l=e.employee_Profile)&&void 0!==l&&l.online_profile)&&!e.employee_Profile.attached_document})),d=await f(a,S),s=await f(r,j),u=g(d),c=g(s),v=((e,l,i)=>e.map((e=>{const o=((e,l,i)=>l.find((l=>l.employee_Profile.application.id===e))||i.find((l=>l.employee_Profile.application.id===e)))(e.id,l,i);return o?{...e,...o}:e})))(e,c,u);console.log("cvContentProfile",v);const p=await(0,t.A)(o.Rj,c).catch((()=>[]));l(v),null!==p&&void 0!==p&&n(!0,p)})(d,a,0,s);break;case 2:await(async(e,l)=>{console.log("Start round 2");const i=e.map((e=>{var l,i,o;let n;var t,a,r,d,s,u,c,v,p;if(null!==e&&void 0!==e&&null!==(l=e.employee_Profile)&&void 0!==l&&l.online_profile)n={jobTitle:null===e||void 0===e||null===(t=e.employee_Profile)||void 0===t||null===(a=t.online_profile)||void 0===a?void 0:a.jobTitle,skills:null===e||void 0===e||null===(r=e.employee_Profile)||void 0===r?void 0:r.online_profile.skills,another_degree:null===e||void 0===e||null===(d=e.employee_Profile)||void 0===d||null===(s=d.online_profile.another_degree)||void 0===s?void 0:s.map((e=>e.Name)),education_informations:null===e||void 0===e||null===(u=e.employee_Profile)||void 0===u||null===(c=u.online_profile.education_informations)||void 0===c?void 0:c.map((e=>e.degreeName)),work_experiences:null===e||void 0===e||null===(v=e.employee_Profile)||void 0===v||null===(p=v.online_profile.work_experiences)||void 0===p?void 0:p.map((e=>({jobTitle:null===e||void 0===e?void 0:e.jobTitle,jobDescription:null===e||void 0===e?void 0:e.jobDescription})))};else if(null!==e&&void 0!==e&&null!==(i=e.employee_Profile)&&void 0!==i&&i.attached_document){var m,h;n={skills:null===e||void 0===e||null===(m=e.employee_Profile)||void 0===m?void 0:m.attached_document.skills,CV:null===e||void 0===e||null===(h=e.employee_Profile)||void 0===h?void 0:h.attached_document.CV}}else{var f;n=null===e||void 0===e||null===(f=e.employee_Profile)||void 0===f?void 0:f.application.CV}return{employer_Requirement:{requiredSkills:e.employer_Requirement.requiredSkills},employee_Profile:{profile:n,application_id:null===e||void 0===e||null===(o=e.employee_Profile)||void 0===o?void 0:o.application.application_id}}}));console.log(i);const n=await Promise.all(i.map((async e=>{var l;const i=await(0,t.A)(o.dl,[e.employee_Profile.profile],null,{58:5,60:5});return{id:e.employee_Profile.application_id,employee_Profile:(null===(l=(0,v.Z)(i))||void 0===l?void 0:l.split(","))||"",employer_Requirement:e.employer_Requirement.requiredSkills.split(",")||""}})));l((await(0,t.s)(n)).map((e=>{const l=e.employer_Requirement.filter((l=>e.employee_Profile.some((e=>(0,c.Omf)(e.result,l.result)>.6))));return{id:e.id,result:100/e.employer_Requirement.length*l.length}})).map((e=>JSON.stringify(e))))})(r,i);break;case 3:await(async(e,l)=>{console.log("Start round 3");const i=await(0,t.s)(e.map((e=>({id:e.id,employee_Profile:e.employer_Requirement.keywords.split(","),employer_Requirement:e.employee_Profile.application.keywords.split(",")}))));l((await Promise.all(i.map((async e=>{let l=e.employee_Profile.reduce(((l,i)=>e.employer_Requirement.some((e=>(0,c.Omf)(i.result,e.result)>.6))?l+5:l),0);const i=await Promise.all(e.employer_Requirement.filter((l=>!e.employee_Profile.some((e=>(0,c.Omf)(e.result,l.result)>.6)))).map((async e=>e.word)));console.log(i);const o=i.length>0?"\u0110\u1ec3 t\u0103ng t\u1ec9 l\u1ec7 \u0111\u1eadu b\u1ea1n c\xf3 th\u1ec3 trang b\u1ecb th\xeam k\u0129 n\u0103ng: ".concat([...new Set(i)].slice(0,4).join(", ")):"H\u1ed3 s\u01a1 c\u1ee7a b\u1ea1n \u0111\xe3 \u0111\xe1p \u1ee9ng y\xeau c\u1ea7u c\u1ee7a tin tuy\u1ec3n d\u1ee5ng n\xe0y";return{id:e.id,result:l,hints:o}})))).map((e=>JSON.stringify(e))))})(r,i)}},C=async e=>Promise.all(e.map((async e=>e&&JSON.parse(e.substring(e.indexOf("{"),e.lastIndexOf("}")+1)))))},95382:(e,l,i)=>{"use strict";var o=i(32392);l.A=void 0;var n=o(i(40039)),t=i(70579),a=(0,n.default)((0,t.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");l.A=a},17406:()=>{},69851:()=>{},38586:()=>{},76149:()=>{},60933:()=>{},9193:()=>{},41234:()=>{}}]);
//# sourceMappingURL=174.917a7076.chunk.js.map