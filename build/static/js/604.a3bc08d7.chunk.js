"use strict";(self.webpackChunkFE_DACN=self.webpackChunkFE_DACN||[]).push([[604],{29773:(e,n,l)=>{l.d(n,{A:()=>a});var i=l(34535),t=(l(65043),l(51318)),o=l(70579);const s=(0,i.Ay)(t.N_)((e=>{let{theme:n}=e;return{textDecoration:"none",color:n.colors.info.dark,"&:active":{color:n.colors.primary.light},"&:visited":{color:n.colors.info.dark}}})),a=e=>(0,o.jsx)(s,{...e})},93604:(e,n,l)=>{l.r(n),l.d(n,{default:()=>se});var i=l(19252),t=l(68903),o=l(12110),s=l(19464),a=l(79958),d=l(11906),r=l(39336),u=l(26494),c=l(29773),v=l(28800),h=l(85865),m=l(81637),g=l(17392),x=l(77739),p=l(59162),y=l(49768),A=l(65043),f=l(82907),j=l(36110),b=l(53679);const C=()=>{const e=(0,f.useQueryClient)(),{toast:n}=(0,j.n)(),{isLoading:l,mutateAsync:i}=(0,f.useMutation)((e=>{let[n,l]=e;return b.G1.update(n,l)}),{onSuccess:l=>{200===l.status?(e.invalidateQueries(["get-AllJobsByAdmin"]),n.success({massage:l.message})):n.error({massage:l.message})},onError:e=>{n.error({massage:e.response.data.message})}});return{mutate:i,isLoading:l}};var w=l(56743),k=l(25567);const S=e=>{var n,l,i,t,o,s,a,d,r,u,c,v;const{isAdmin:h}=(0,j.n)(),{data:m,isLoading:g,refetch:x}=(0,f.useQuery)(["get-AllJobsByAdmin",e],(()=>{for(const n in e)"T\u1ea5t c\u1ea3"===e[n]&&(e[n]="");return b.G1.get({params:e})}),{keepPreviousData:!0,retry:1,refetchOnWindowFocus:!1,enabled:h});return{jobs:(null===m||void 0===m||null===(n=m.data)||void 0===n||null===(l=n.items)||void 0===l?void 0:l.map((e=>{var n;return{...e,id:e.postId,companyName:null===e||void 0===e||null===(n=e.employer)||void 0===n?void 0:n.companyName}})))||[],totalItems:null===m||void 0===m||null===(i=m.data)||void 0===i||null===(t=i.meta)||void 0===t?void 0:t.totalItems,itemCount:null===m||void 0===m||null===(o=m.data)||void 0===o||null===(s=o.meta)||void 0===s?void 0:s.itemCount,itemPerPage:null===m||void 0===m||null===(a=m.data)||void 0===a||null===(d=a.meta)||void 0===d?void 0:d.itemPerPage,totalPages:null===m||void 0===m||null===(r=m.data)||void 0===r||null===(u=r.meta)||void 0===u?void 0:u.totalPages,currentPage:null===m||void 0===m||null===(c=m.data)||void 0===c||null===(v=c.meta)||void 0===v?void 0:v.currentPage,isLoading:g,refetch:x}};var I=l(60446),N=l.n(I),W=l(4020),P=l(19217),L=l(54367),T=l(71525),D=l(95382),F=l(65499),M=l(67597),z=l(50135),J=l(12197),q=l(83462),H=l(26600),O=l(35316),Y=l(77326),B=l(65072),E=l(21430),Q=l(74802),R=l(7968),V=l(70579);function G(e){let{data:n,postId:l,setSelectedId:t}=e;const{isMobile:o}=(0,R.Q)();return(0,V.jsxs)(q.A,{open:Boolean(l),onClose:()=>{t(null)},fullWidth:!0,maxWidth:"lg",fullScreen:o,children:[(0,V.jsxs)(H.A,{sx:{textAlign:"center",fontWeight:700,fontSize:"1.3rem"},children:["Vi\u1ec7c l\xe0m \u1ee9ng tuy\u1ec3n",(0,V.jsx)(g.A,{"aria-label":"close",onClick:()=>t(null),sx:{position:"absolute",right:14,top:14,color:e=>e.palette.grey[500]},children:(0,V.jsx)(Q.A,{})})]}),(0,V.jsx)(r.A,{sx:{bgcolor:"#B6FFFA",height:2}}),(0,V.jsx)(O.A,{children:(0,V.jsxs)(i.A,{sx:{paddingY:2},children:[(0,V.jsx)(Y.A,{data:n}),(0,V.jsx)(B.A,{}),(0,V.jsx)(E.A,{sx:{mt:2},company:null===n||void 0===n?void 0:n.employer})]})})]})}var K=l(89138),_=l(65498);const U=e=>{const[n,l]=(0,A.useState)(null),{setItemDetail:i}=(0,K.A)();return(0,V.jsxs)(t.Ay,{container:!0,alignItems:"center",children:[(0,V.jsx)(t.Ay,{item:!0,xs:10.5,sm:12,children:(0,V.jsx)(F.L,{sx:{color:"#319fce",":hover":{textDecoration:"none",cursor:"pointer"},textDecoration:"none"},onClick:()=>{l(e.id),i(null===e||void 0===e?void 0:e.row)},children:e.value})}),(0,V.jsx)(t.Ay,{item:!0,xs:1.5,sm:0,sx:{display:{sm:"none",xs:"inline"}},children:(0,V.jsx)(x.A,{title:"Chi ti\u1ebft",children:(0,V.jsx)(g.A,{size:"small",onClick:()=>{var n,l,i,t,o,s,a,d,r;const u={"T\xean tin tuy\u1ec3n d\u1ee5ng":null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.jobTitle,"Ng\u01b0\u1eddi \u0111\u0103ng":null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.name,"T\xean c\xf4ng ty":null===e||void 0===e||null===(i=e.row)||void 0===i||null===(t=i.employer)||void 0===t?void 0:t.companyName,"Ng\xe0y \u0111\u0103ng":N()(null===(o=e.row)||void 0===o?void 0:o.createAt).add(7,"hours").format("DD-MM-YYYY HH:mm:ss"),"L\u01b0\u1ee3t n\u1ed9p":null===(s=e.row)||void 0===s?void 0:s.submissionCount,"L\u01b0\u1ee3t xem":null===e||void 0===e||null===(a=e.row)||void 0===a?void 0:a.view,"Tr\u1ea1ng th\xe1i":null===e||void 0===e||null===(d=e.row)||void 0===d?void 0:d.status,"Ki\u1ec3m duy\u1ec7t":null===(r=$.find((n=>{var l;return n.value==(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.check)})))||void 0===r?void 0:r.label};(0,z.A)(u)},children:(0,V.jsx)(M.A,{fontSize:"small"})})})}),(0,V.jsx)(G,{postId:n,setSelectedId:l,data:null===e||void 0===e?void 0:e.row})]})},X=e=>{var n,l,i;return(0,V.jsx)(t.Ay,{container:!0,alignItems:"center",children:(0,V.jsx)(t.Ay,{item:!0,xs:12,component:F.L,children:(0,V.jsx)(c.A,{to:"/company/".concat((0,L.O)(e.value),"?id=").concat(btoa(null===e||void 0===e||null===(n=e.row)||void 0===n||null===(l=n.employer)||void 0===l?void 0:l.userId)),state:{id:null===e||void 0===e||null===(i=e.value)||void 0===i?void 0:i.userId},children:e.value})})})},Z=e=>{var n,l;console.log(e);const{isMobile:i}=(0,R.Q)(),t=p.J2.find((n=>n.label===e.value)).value,{mutate:o}=C();return(0,V.jsx)(y.A,{value:t,options:p.J2.map((e=>"pending"===e.value||"expired"===e.value?{...e,disabled:!0}:e)),onChange:n=>{const l=n.target.value;1==(null===e||void 0===e?void 0:e.row.check)&&l===Object.keys(w.q0)[0]?(0,T.A)({selectedId:e.id,handleConfirm:()=>{return l=e.id,i=n.target.value,void o([l,{status:i,check:!1}]);var l,i},message:"Tin tuy\u1ec3n d\u1ee5ng \u0111ang \u1edf tr\u1ea1ng th\xe1i VI PH\u1ea0M, b\u1ea1n c\xf3 ch\u1eafc ch\u1eafn tin tuy\u1ec3n d\u1ee5ng n\xe0y l\xe0 h\u1ee3p quy \u0111\u1ecbnh v\xe0 mu\u1ed1n duy\u1ec7t tin tuy\u1ec3n d\u1ee5ng n\xe0y?"}):o([e.id,{status:l}])},size:"small",sx:{fontSize:i?10:13,color:(()=>{var n;return null===(n=p.J2.find((n=>n.label===e.value)))||void 0===n?void 0:n.optionColor})()},disabled:"H\u1ebft h\u1ea1n"===(null===e||void 0===e?void 0:e.value)||(null===e||void 0===e||null===(n=e.row)||void 0===n||null===(l=n.applications)||void 0===l?void 0:l.length)>0})},$=[{label:"Ch\u01b0a x\xe1c \u0111\u1ecbnh",value:null,color:"#fff"},{label:"H\u1ee3p quy \u0111\u1ecbnh",value:!1,color:"#BFD8AF"},{label:"Vi ph\u1ea1m",value:!0,color:"#F94C10"}],ee=e=>{const{mutate:n}=C(),l=$.find((n=>n.value==e.value)),[i,t]=(0,A.useState)(l);$.map((e=>({label:e.label,value:e.value?"true":0==e.value?"false":"null"})));return(0,A.useEffect)((()=>{t(l)}),[e.value]),(0,V.jsx)(h.A,{bgcolor:null===l||void 0===l?void 0:l.color,sx:{width:"90%",borderRadius:1,py:1,textAlign:"center",fontSize:13},children:null===l||void 0===l?void 0:l.label})};function ne(e){var n;let{statusFilter:l,selectedProfession:i}=e;const{mutate:o}=C(),[a,r]=(0,A.useState)(!1),[u,c]=(0,A.useState)([]),[g,x]=(0,A.useState)(1),[f,j]=(0,A.useState)([]),[b,I]=(0,A.useState)({orderBy:"",sort:""}),{jobs:L,isLoading:F,totalPages:M}=S({page:g,num:9,status:w.q0[l],profession:i,...b}),{isMobile:z}=(0,R.Q)(),q=[{field:"jobTitle",headerName:"Tin tuy\u1ec3n d\u1ee5ng",minWidth:z?130:200,renderCell:U,sortable:!0},{field:"name",headerName:"Ng\u01b0\u1eddi \u0111\u0103ng",minWidth:120,sortable:!0,renderCell:e=>(0,V.jsx)(s.A,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"wrap",lineHeight:"1.5",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.value})},{field:"companyName",headerName:"T\xean c\xf4ng ty",minWidth:200,renderCell:X,sortable:!0},{field:"createAt",headerName:"Ng\xe0y \u0111\u0103ng",minWidth:110,sortable:!0,renderCell:e=>(0,V.jsx)(s.A,{sx:{whiteSpace:"wrap",lineHeight:"1.5em"},children:N()(e.value).add(7,"hours").format("DD-MM-YYYY HH:mm:ss")})},{field:"submissionCount",headerName:"L\u01b0\u1ee3t n\u1ed9p",minWidth:90,align:"center",headerAlign:"center",sortable:!0},{field:"view",headerName:"L\u01b0\u1ee3t xem",minWidth:90,align:"center",headerAlign:"center",sortable:!0,resizable:!0},{field:"status",headerName:"Tr\u1ea1ng th\xe1i",minWidth:z?115:130,headerAlign:"center",renderCell:Z},{field:"check",headerName:"Ki\u1ec3m duy\u1ec7t",minWidth:130,headerAlign:"center",align:"center",renderCell:ee,sortable:!0}];(0,A.useEffect)((()=>{if(!a)return;(async e=>{const n=await(0,W.A)(P.aG,e),l=null===n||void 0===n?void 0:n.map((e=>(0,J.Jm)(e)&&JSON.parse(e))),i=null===L||void 0===L?void 0:L.map((e=>{const n=l.find((n=>n.id===e.postId));return n?(o([n.id,{check:n.result}]),{...e,check:n.result}):e}));c(i),r(!1)})(L.filter((e=>f.includes(e.postId))).map((e=>(e=>({postId:null===e||void 0===e?void 0:e.postId,jobTitle:null===e||void 0===e?void 0:e.jobTitle,jobDescription:null===e||void 0===e?void 0:e.jobDescription,jobRequirements:null===e||void 0===e?void 0:e.jobRequirements,benefits:null===e||void 0===e?void 0:e.benefits,requiredSkills:null===e||void 0===e?void 0:e.requiredSkills}))(e))))}),[a]),(0,A.useEffect)((()=>{L&&c((()=>L))}),[JSON.stringify(L)]),(0,A.useEffect)((()=>{x(1)}),[l]);const[H,O]=(0,A.useState)(null),Y=()=>{const e=()=>{Promise.all(f.map((e=>o([e,{status:H}]))))},n=L.find((e=>f.includes(e.postId)&&1==e.check));f.some((e=>n&&H===Object.keys(w.q0)[0]))?(0,T.A)({handleConfirm:e,message:"C\xf3 tin tuy\u1ec3n d\u1ee5ng \u0111ang \u1edf tr\u1ea1ng th\xe1i vi ph\u1ea1m, b\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n c\xe1c duy\u1ec7t tin tuy\u1ec3n d\u1ee5ng \u0111\xe3 ch\u1ecdn kh\xf4ng?"}):e()};return(0,V.jsxs)(s.A,{children:[(0,V.jsx)(s.A,{sx:{display:"block",float:{md:"right"},minWidth:{md:500},maxWidth:500},children:(0,V.jsxs)(t.Ay,{container:!0,sx:{alignItems:"center"},spacing:1,children:[(0,V.jsx)(t.Ay,{item:!0,md:3,xs:12,children:(0,V.jsxs)(h.A,{fontWeight:700,children:["\u0110\xe3 ch\u1ecdn: ",f.length]})}),(0,V.jsxs)(t.Ay,{item:!0,md:5,xs:12,display:"flex",children:[(0,V.jsx)(y.A,{options:p.J2,onChange:e=>{O(e.target.value)},value:f.length>0?H:"",sx:{color:null===(n=p.J2.find((e=>e.value===H)))||void 0===n?void 0:n.optionColor},disabled:!f.length,label:"Duy\u1ec7t nhanh"}),(0,V.jsx)(d.A,{variant:"contained",size:"small",sx:{py:1,px:0},color:"info",onClick:()=>{(0,T.A)({handleConfirm:Y,message:"Chuy\u1ec3n tin tuy\u1ec3n d\u1ee5ng \u0111\xe3 ch\u1ecdn sang tr\u1ea1ng th\xe1i ".concat(w.q0[H].toUpperCase(),"?")})},disabled:!f.length||!H,children:(0,V.jsx)(D.A,{sx:{fontSize:15}})})]}),(0,V.jsx)(t.Ay,{item:!0,container:!0,md:4,xs:12,sx:{display:"flex",alignItems:"center"},children:(0,V.jsxs)(d.A,{onClick:()=>r(f.length>0),variant:"contained",size:"small",disabled:a||!f.length,fullWidth:!0,sx:{py:1,px:0,bgcolor:"#FC4100"},children:[(0,V.jsx)(t.Ay,{item:!0,xs:a?9:12,children:a?"\u0110ang ki\u1ec3m duy\u1ec7t...":"Ki\u1ec3m duy\u1ec7t"}),(0,V.jsx)(t.Ay,{item:!0,xs:a?3:0,children:a&&(0,V.jsx)(m.A,{size:18,color:"secondary"})})]})})]})}),(0,V.jsx)(v.A,{sx:{minHeight:"72vh",width:"100%"},rows:u,columns:q,hideFooter:!0,checkboxSelection:!0,rowSelection:!0,onRowSelectionModelChange:e=>{j(e)},loading:F,initialState:{columns:{columnVisibilityModel:{name:!z,companyName:!z,createAt:!z,submissionCount:!z,view:!z,check:!z}}},disableRowSelectionOnClick:z,onSortModelChange:e=>{(0,_.V)(e,I)},isRowSelectable:e=>{var n,l;return console.log(e),(null===e||void 0===e||null===(n=e.row)||void 0===n||null===(l=n.applications)||void 0===l?void 0:l.length)<=0}}),(0,V.jsx)(k.A,{totalPages:M,currentPage:g,handlePageChange:x,disabled:a})]})}var le=l(4037),ie=l(62237);const te=e=>{const{data:n,isLoading:l}=(0,f.useQuery)(["get-TotalResultsEachProfessionByAdmin",e],(()=>b.J.get({params:e})),{retry:1,refetchOnWindowFocus:!1});return{dataList:null===n||void 0===n?void 0:n.data,isLoading:l}},oe=[{value:"",label:"T\u1ea5t c\u1ea3",color:"info",optionColor:"#000"},...p.J2],se=()=>{const[e,n]=(0,A.useState)(""),[l,c]=(0,A.useState)(null),[v,h]=(0,A.useState)(!1),{dataList:m,isLoading:g}=te();return g?(0,V.jsx)(ie.A,{}):(0,V.jsx)(i.A,{maxWidth:"xl",children:(0,V.jsx)(t.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,marginTop:0,children:(0,V.jsx)(t.Ay,{item:!0,xs:12,children:(0,V.jsxs)(o.A,{children:[(0,V.jsxs)(s.A,{sx:{display:"flex",justifyContent:{sm:"space-between",xs:"center"},flexWrap:"wrap"},children:[(0,V.jsx)(a.A,{title:"Danh s\xe1ch tin tuy\u1ec3n d\u1ee5ng"}),(0,V.jsxs)(s.A,{sx:{display:"flex",justifyContent:{xs:"center",sm:"end"},px:2,gap:1},children:[!v&&(0,V.jsx)(s.A,{sx:{margin:"auto",width:"120px"},children:(0,V.jsx)(y.A,{label:"Tr\u1ea1ng th\xe1i",value:e,options:oe,onChange:e=>(e=>{n(e.target.value)})(e),sx:{color:oe.find((n=>n.value===e)).optionColor}})}),(0,V.jsx)(d.A,{variant:"contained",color:v?"info":"primary",onClick:()=>{h((e=>!e)),c(null)},sx:{margin:"auto",height:35,width:150},children:v?"T\u1ea5t c\u1ea3":"Xem theo ng\xe0nh"})]})]}),(0,V.jsx)(r.A,{}),(0,V.jsxs)(u.A,{children:[v&&!l&&(0,V.jsx)(le.A,{handleSelectProfession:e=>{c(e),h(!1)},handleViewProfessionMode:h,total:m}),!v&&(0,V.jsx)(ne,{statusFilter:e,selectedProfession:l})]})]})})})})}},95382:(e,n,l)=>{var i=l(32392);n.A=void 0;var t=i(l(40039)),o=l(70579),s=(0,t.default)((0,o.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");n.A=s}}]);
//# sourceMappingURL=604.a3bc08d7.chunk.js.map