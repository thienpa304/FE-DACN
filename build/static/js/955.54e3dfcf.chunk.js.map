{"version":3,"file":"static/js/955.54e3dfcf.chunk.js","mappings":"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","sources":["modules/application/hooks/useQueryCandidateApplications.ts","pages/company-review-profiles/index.tsx"],"sourcesContent":["import { AxiosError } from 'axios';\nimport { useQuery } from 'react-query';\nimport { PaginationType, ResponseData } from 'src/common/http-request';\nimport { Application } from '../model';\nimport { CandidateProfilesService } from '../applicationService';\nimport { useApp } from 'src/modules/app/hooks';\n\nconst useQueryCandidateApplications = (params?) => {\n  const { isEmployer } = useApp();\n  const { data, isLoading, refetch, isFetching } = useQuery<\n    ResponseData<PaginationType<Application[]>>,\n    AxiosError<ResponseData<Application[]>>\n  >(\n    ['application-getList', params],\n    () => CandidateProfilesService.get({ params }),\n    {\n      keepPreviousData: true,\n      retry: 1,\n      refetchOnWindowFocus: false,\n      enabled: isEmployer\n    }\n  );\n\n  return {\n    data:\n      data?.data?.items?.map((item) => ({\n        ...item,\n        id: item.application_id\n      })) || [],\n    totalItems: data?.data?.meta?.totalItems,\n    itemCount: data?.data?.meta?.itemCount,\n    itemPerPage: data?.data?.meta?.itemPerPage,\n    totalPages: data?.data?.meta?.totalPages,\n    currentPage: data?.data?.meta?.currentPage,\n    isLoading,\n    refetch,\n    isFetching\n  };\n};\n\nexport default useQueryCandidateApplications;\n","import {\n  Card,\n  CardContent,\n  CardHeader,\n  Container,\n  Divider,\n  Grid,\n  Tab,\n  Tabs,\n  styled\n} from '@mui/material';\nimport useQueryCandidateApplications from 'src/modules/application/hooks/useQueryCandidateApplications';\nimport Table from './Table';\nimport SuspenseLoader from 'src/components/SuspenseLoader';\nimport { useEffect, useMemo, useState } from 'react';\nimport useQueryTotalResultOfApplicationByEmployer from 'src/modules/application/hooks/useQueryTotalResultOfApplicationByEmployer';\nimport TabsWrapper from 'src/components/TabWrapper';\nimport Pagination from 'src/components/Pagination';\nimport useApplicationList from 'src/modules/jobs/hooks/useFollowJobList';\nimport { deepEqual } from 'src/utils/formatData';\nimport {\n  ProfileApplicationType,\n  getKeywords,\n  preprocessJobData\n} from 'src/utils/reviewProfile';\nimport { Job } from 'src/modules/jobs/model';\nimport { useQueryJobByIdListByOwner } from 'src/modules/jobs/hooks/useQueryJobByIdByOwner';\n\nconst tabs = [\n  { label: 'Tất cả', value: '' },\n  { label: 'Đã duyệt', value: 'Đã duyệt' },\n  { label: 'Chờ duyệt', value: 'Chờ duyệt' },\n  { label: 'Từ chối', value: 'Từ chối' },\n  { label: 'Hết hạn', value: 'Hết hạn' }\n];\n\nconst matchJobAndProfile = (jobs: Job[], data): ProfileApplicationType[] =>\n  data\n    ?.map((item) => {\n      const job = jobs?.find((job) => job?.postId === item?.postId);\n      if (!job) return null;\n\n      const {\n        application_id,\n        name,\n        email,\n        phone,\n        applicationType,\n        status,\n        matchingScore,\n        employee,\n        CV,\n        id\n      } = item;\n      const { postId, jobTitle } = job;\n      const keywords = getKeywords(item);\n\n      const applicationInfo = {\n        id: application_id,\n        employer_Requirement: preprocessJobData(job),\n        employee_Profile: {\n          online_profile: employee?.online_profile,\n          attached_document: employee?.attached_document,\n          personal_information: {\n            ...employee?.user,\n            name,\n            email,\n            phone\n          },\n          application: {\n            id,\n            application_id,\n            postId,\n            CV,\n            applicationType,\n            jobTitle,\n            keywords,\n            name,\n            status,\n            matchingScore\n          }\n        }\n      };\n      return applicationInfo;\n    })\n    .filter(Boolean);\n\nconst CandidateProfiles = () => {\n  const pageSize = 9;\n  const [currentTab, setCurrentTab] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const {\n    data,\n    isLoading: isLoadingData,\n    totalPages\n  } = useQueryCandidateApplications({\n    page: currentPage,\n    num: pageSize,\n    status: currentTab\n  });\n  const jobsIdList: number[] = useMemo(\n    () => [...new Set<number>(data?.map((item) => item?.postId))],\n    [data]\n  );\n\n  const { jobs, isLoading: isLoadingJobs } =\n    useQueryJobByIdListByOwner(jobsIdList);\n\n  const handleTabsChange = (e, value) => {\n    setCurrentPage(1);\n    setCurrentTab(value);\n  };\n\n  // First time render the page\n  const initialJobProfileData = useMemo(() => {\n    return matchJobAndProfile(jobs, data);\n  }, [data, jobs]);\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Grid\n        container\n        direction=\"row\"\n        justifyContent=\"center\"\n        alignItems=\"stretch\"\n        spacing={3}\n        marginTop={0}\n      >\n        <Grid item xs={12}>\n          <Card>\n            <CardHeader title=\"Danh Sách ứng viên\" />\n            <Divider />\n            <CardContent>\n              <TabsWrapper\n                onChange={handleTabsChange}\n                value={currentTab}\n                variant=\"scrollable\"\n                scrollButtons={false}\n                sx={{\n                  display: { md: 'inline-block' },\n                  borderBottom: 1,\n                  borderColor: 'divider'\n                }}\n              >\n                {tabs.map((tab) => {\n                  return (\n                    <Tab key={tab.value} label={tab.label} value={tab.value} />\n                  );\n                })}\n              </TabsWrapper>\n              <Table\n                data={initialJobProfileData}\n                pageSize={pageSize}\n                currentPage={currentPage}\n                totalPages={totalPages}\n                handlePageChange={setCurrentPage}\n                loading={isLoadingData || isLoadingJobs}\n              />\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default CandidateProfiles;\n"],"names":["params","_data$data","_data$data$items","_data$data2","_data$data2$meta","_data$data3","_data$data3$meta","_data$data4","_data$data4$meta","_data$data5","_data$data5$meta","_data$data6","_data$data6$meta","isEmployer","useApp","data","isLoading","refetch","isFetching","useQuery","CandidateProfilesService","get","keepPreviousData","retry","refetchOnWindowFocus","enabled","items","map","item","id","application_id","totalItems","meta","itemCount","itemPerPage","totalPages","currentPage","tabs","label","value","CandidateProfiles","currentTab","setCurrentTab","useState","setCurrentPage","isLoadingData","useQueryCandidateApplications","page","num","status","jobsIdList","useMemo","Set","postId","jobs","isLoadingJobs","useQueryJobByIdListByOwner","initialJobProfileData","matchJobAndProfile","job","find","name","email","phone","applicationType","matchingScore","employee","CV","jobTitle","keywords","getKeywords","employer_Requirement","preprocessJobData","employee_Profile","online_profile","attached_document","personal_information","user","application","filter","Boolean","_jsx","Container","maxWidth","children","Grid","container","direction","justifyContent","alignItems","spacing","marginTop","xs","_jsxs","Card","CardHeader","title","Divider","CardContent","TabsWrapper","onChange","handleTabsChange","e","variant","scrollButtons","sx","display","md","borderBottom","borderColor","tab","Tab","Table","pageSize","handlePageChange","loading"],"sourceRoot":""}